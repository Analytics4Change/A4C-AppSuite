---
apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-worker-config
  namespace: temporal
  labels:
    app: workflow-worker
    component: temporal-worker
    environment: development
data:
  # Temporal configuration
  TEMPORAL_ADDRESS: "temporal-frontend.temporal.svc.cluster.local:7233"
  TEMPORAL_NAMESPACE: "default"
  TEMPORAL_TASK_QUEUE: "bootstrap"
  HEALTH_CHECK_PORT: "9090"

  # Workflow mode
  WORKFLOW_MODE: "production"

  # Supabase configuration (non-sensitive)
  # Note: SUPABASE_SERVICE_ROLE_KEY is in workflow-worker-secrets
  SUPABASE_URL: "https://tmrjlswbsxmbglmaclxu.supabase.co"

  # Node environment
  NODE_ENV: "production"

  # Phase 2 Architecture Simplification (Option C):
  # REMOVED: SUPABASE_DB_URL (no longer needed)
  # - Worker no longer uses PostgreSQL LISTEN/NOTIFY
  # - Worker no longer subscribes to Supabase Realtime
  # - Workflows triggered via direct Temporal RPC from Edge Function
