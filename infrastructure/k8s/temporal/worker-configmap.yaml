---
apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-worker-config
  namespace: temporal
  labels:
    app: workflow-worker
    component: temporal-worker
data:
  # Workflow mode (mock | development | production)
  WORKFLOW_MODE: "production"

  # Temporal connection
  TEMPORAL_ADDRESS: "temporal-frontend.temporal.svc.cluster.local:7233"
  TEMPORAL_NAMESPACE: "default"
  TEMPORAL_TASK_QUEUE: "bootstrap"

  # Supabase (non-sensitive)
  SUPABASE_URL: "https://tmrjlswbsxmbglmaclxu.supabase.co"

  # === Domain Configuration ===
  # PLATFORM_BASE_DOMAIN is the single source of truth for all domain configuration.
  # Derived values (not set here - computed at runtime):
  #   - TARGET_DOMAIN = a4c.${PLATFORM_BASE_DOMAIN}   (CNAME target for tenant subdomains)
  #   - FRONTEND_URL  = https://a4c.${PLATFORM_BASE_DOMAIN}  (invitation emails)
  #   - Tenant subdomains = {slug}.${PLATFORM_BASE_DOMAIN}
  PLATFORM_BASE_DOMAIN: "firstovertheline.com"

  # Development features (should be false in production)
  TAG_DEV_ENTITIES: "false"
  AUTO_CLEANUP: "false"

  # Node.js environment
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # Health check
  HEALTH_CHECK_PORT: "9090"
