components:
  messages:
    # Organization-Contact Junction Events
    OrganizationContactLinked:
      name: organization.contact.linked
      title: Organization-Contact Linked
      summary: A contact has been linked to an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationContactLinkedEvent'

    OrganizationContactUnlinked:
      name: organization.contact.unlinked
      title: Organization-Contact Unlinked
      summary: A contact has been unlinked from an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationContactUnlinkedEvent'

    # Organization-Address Junction Events
    OrganizationAddressLinked:
      name: organization.address.linked
      title: Organization-Address Linked
      summary: An address has been linked to an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationAddressLinkedEvent'

    OrganizationAddressUnlinked:
      name: organization.address.unlinked
      title: Organization-Address Unlinked
      summary: An address has been unlinked from an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationAddressUnlinkedEvent'

    # Organization-Phone Junction Events
    OrganizationPhoneLinked:
      name: organization.phone.linked
      title: Organization-Phone Linked
      summary: A phone number has been linked to an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationPhoneLinkedEvent'

    OrganizationPhoneUnlinked:
      name: organization.phone.unlinked
      title: Organization-Phone Unlinked
      summary: A phone number has been unlinked from an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationPhoneUnlinkedEvent'

    # Contact-Phone Junction Events
    ContactPhoneLinked:
      name: contact.phone.linked
      title: Contact-Phone Linked
      summary: A phone number has been linked to a contact
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ContactPhoneLinkedEvent'

    ContactPhoneUnlinked:
      name: contact.phone.unlinked
      title: Contact-Phone Unlinked
      summary: A phone number has been unlinked from a contact
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ContactPhoneUnlinkedEvent'

    # Contact-Address Junction Events
    ContactAddressLinked:
      name: contact.address.linked
      title: Contact-Address Linked
      summary: An address has been linked to a contact
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ContactAddressLinkedEvent'

    ContactAddressUnlinked:
      name: contact.address.unlinked
      title: Contact-Address Unlinked
      summary: An address has been unlinked from a contact
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ContactAddressUnlinkedEvent'

    # Phone-Address Junction Events
    PhoneAddressLinked:
      name: phone.address.linked
      title: Phone-Address Linked
      summary: An address has been linked to a phone number (e.g., location of phone)
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PhoneAddressLinkedEvent'

    PhoneAddressUnlinked:
      name: phone.address.unlinked
      title: Phone-Address Unlinked
      summary: An address has been unlinked from a phone number
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PhoneAddressUnlinkedEvent'

    # Organization-Email Junction Events
    OrganizationEmailLinked:
      name: organization.email.linked
      title: Organization-Email Linked
      summary: An email address has been linked to an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationEmailLinkedEvent'

    OrganizationEmailUnlinked:
      name: organization.email.unlinked
      title: Organization-Email Unlinked
      summary: An email address has been unlinked from an organization
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrganizationEmailUnlinkedEvent'

    # Contact-Email Junction Events
    ContactEmailLinked:
      name: contact.email.linked
      title: Contact-Email Linked
      summary: An email address has been linked to a contact
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ContactEmailLinkedEvent'

    ContactEmailUnlinked:
      name: contact.email.unlinked
      title: Contact-Email Unlinked
      summary: An email address has been unlinked from a contact
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ContactEmailUnlinkedEvent'

  schemas:
    # ============================================================================
    # Organization-Contact Junction Events
    # ============================================================================

    OrganizationContactLinkedEvent:
      title: OrganizationContactLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.contact.linked
        event_data:
          $ref: '#/components/schemas/OrganizationContactLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationContactLinkData:
      title: OrganizationContactLinkData
      type: object
      required:
        - organization_id
        - contact_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        contact_id:
          type: string
          format: uuid
          description: Contact UUID being linked
        reason:
          type: string
          description: Optional reason for linking
          examples:
            - "Primary contact assignment"
            - "Multi-organization contact relationship"

    OrganizationContactUnlinkedEvent:
      title: OrganizationContactUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.contact.unlinked
        event_data:
          $ref: '#/components/schemas/OrganizationContactUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationContactUnlinkData:
      title: OrganizationContactUnlinkData
      type: object
      required:
        - organization_id
        - contact_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        contact_id:
          type: string
          format: uuid
          description: Contact UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking
          examples:
            - "Contact no longer associated with organization"
            - "Organization cascade deletion"

    # ============================================================================
    # Organization-Address Junction Events
    # ============================================================================

    OrganizationAddressLinkedEvent:
      title: OrganizationAddressLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.address.linked
        event_data:
          $ref: '#/components/schemas/OrganizationAddressLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationAddressLinkData:
      title: OrganizationAddressLinkData
      type: object
      required:
        - organization_id
        - address_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        address_id:
          type: string
          format: uuid
          description: Address UUID being linked
        reason:
          type: string
          description: Optional reason for linking

    OrganizationAddressUnlinkedEvent:
      title: OrganizationAddressUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.address.unlinked
        event_data:
          $ref: '#/components/schemas/OrganizationAddressUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationAddressUnlinkData:
      title: OrganizationAddressUnlinkData
      type: object
      required:
        - organization_id
        - address_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        address_id:
          type: string
          format: uuid
          description: Address UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking

    # ============================================================================
    # Organization-Phone Junction Events
    # ============================================================================

    OrganizationPhoneLinkedEvent:
      title: OrganizationPhoneLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.phone.linked
        event_data:
          $ref: '#/components/schemas/OrganizationPhoneLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationPhoneLinkData:
      title: OrganizationPhoneLinkData
      type: object
      required:
        - organization_id
        - phone_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        phone_id:
          type: string
          format: uuid
          description: Phone UUID being linked
        reason:
          type: string
          description: Optional reason for linking

    OrganizationPhoneUnlinkedEvent:
      title: OrganizationPhoneUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.phone.unlinked
        event_data:
          $ref: '#/components/schemas/OrganizationPhoneUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationPhoneUnlinkData:
      title: OrganizationPhoneUnlinkData
      type: object
      required:
        - organization_id
        - phone_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        phone_id:
          type: string
          format: uuid
          description: Phone UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking

    # ============================================================================
    # Contact-Phone Junction Events
    # ============================================================================

    ContactPhoneLinkedEvent:
      title: ContactPhoneLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (contact_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: contact.phone.linked
        event_data:
          $ref: '#/components/schemas/ContactPhoneLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    ContactPhoneLinkData:
      title: ContactPhoneLinkData
      type: object
      required:
        - contact_id
        - phone_id
      properties:
        contact_id:
          type: string
          format: uuid
          description: Contact UUID
        phone_id:
          type: string
          format: uuid
          description: Phone UUID being linked
        reason:
          type: string
          description: Optional reason for linking

    ContactPhoneUnlinkedEvent:
      title: ContactPhoneUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (contact_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: contact.phone.unlinked
        event_data:
          $ref: '#/components/schemas/ContactPhoneUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    ContactPhoneUnlinkData:
      title: ContactPhoneUnlinkData
      type: object
      required:
        - contact_id
        - phone_id
      properties:
        contact_id:
          type: string
          format: uuid
          description: Contact UUID
        phone_id:
          type: string
          format: uuid
          description: Phone UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking

    # ============================================================================
    # Contact-Address Junction Events
    # ============================================================================

    ContactAddressLinkedEvent:
      title: ContactAddressLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (contact_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: contact.address.linked
        event_data:
          $ref: '#/components/schemas/ContactAddressLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    ContactAddressLinkData:
      title: ContactAddressLinkData
      type: object
      required:
        - contact_id
        - address_id
      properties:
        contact_id:
          type: string
          format: uuid
          description: Contact UUID
        address_id:
          type: string
          format: uuid
          description: Address UUID being linked
        reason:
          type: string
          description: Optional reason for linking

    ContactAddressUnlinkedEvent:
      title: ContactAddressUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (contact_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: contact.address.unlinked
        event_data:
          $ref: '#/components/schemas/ContactAddressUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    ContactAddressUnlinkData:
      title: ContactAddressUnlinkData
      type: object
      required:
        - contact_id
        - address_id
      properties:
        contact_id:
          type: string
          format: uuid
          description: Contact UUID
        address_id:
          type: string
          format: uuid
          description: Address UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking

    # ============================================================================
    # Phone-Address Junction Events
    # ============================================================================

    PhoneAddressLinkedEvent:
      title: PhoneAddressLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (phone_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: phone.address.linked
        event_data:
          $ref: '#/components/schemas/PhoneAddressLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    PhoneAddressLinkData:
      title: PhoneAddressLinkData
      type: object
      required:
        - phone_id
        - address_id
      properties:
        phone_id:
          type: string
          format: uuid
          description: Phone UUID
        address_id:
          type: string
          format: uuid
          description: Address UUID being linked (e.g., location of phone)
        reason:
          type: string
          description: Optional reason for linking

    PhoneAddressUnlinkedEvent:
      title: PhoneAddressUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (phone_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: phone.address.unlinked
        event_data:
          $ref: '#/components/schemas/PhoneAddressUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    PhoneAddressUnlinkData:
      title: PhoneAddressUnlinkData
      type: object
      required:
        - phone_id
        - address_id
      properties:
        phone_id:
          type: string
          format: uuid
          description: Phone UUID
        address_id:
          type: string
          format: uuid
          description: Address UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking

    # ============================================================================
    # Organization-Email Junction Events
    # ============================================================================

    OrganizationEmailLinkedEvent:
      title: OrganizationEmailLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.email.linked
        event_data:
          $ref: '#/components/schemas/OrganizationEmailLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationEmailLinkData:
      title: OrganizationEmailLinkData
      type: object
      required:
        - organization_id
        - email_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        email_id:
          type: string
          format: uuid
          description: Email UUID being linked
        reason:
          type: string
          description: Optional reason for linking

    OrganizationEmailUnlinkedEvent:
      title: OrganizationEmailUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (organization_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: organization.email.unlinked
        event_data:
          $ref: '#/components/schemas/OrganizationEmailUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    OrganizationEmailUnlinkData:
      title: OrganizationEmailUnlinkData
      type: object
      required:
        - organization_id
        - email_id
      properties:
        organization_id:
          type: string
          format: uuid
          description: Organization UUID
        email_id:
          type: string
          format: uuid
          description: Email UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking

    # ============================================================================
    # Contact-Email Junction Events
    # ============================================================================

    ContactEmailLinkedEvent:
      title: ContactEmailLinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (contact_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: contact.email.linked
        event_data:
          $ref: '#/components/schemas/ContactEmailLinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    ContactEmailLinkData:
      title: ContactEmailLinkData
      type: object
      required:
        - contact_id
        - email_id
      properties:
        contact_id:
          type: string
          format: uuid
          description: Contact UUID
        email_id:
          type: string
          format: uuid
          description: Email UUID being linked
        reason:
          type: string
          description: Optional reason for linking

    ContactEmailUnlinkedEvent:
      title: ContactEmailUnlinkedEvent
      type: object
      required:
        - stream_id
        - stream_type
        - event_type
        - event_data
        - event_metadata
      properties:
        stream_id:
          type: string
          format: uuid
          description: Junction UUID (contact_id)
        stream_type:
          type: string
          const: junction
        event_type:
          type: string
          const: contact.email.unlinked
        event_data:
          $ref: '#/components/schemas/ContactEmailUnlinkData'
        event_metadata:
          $ref: '../components/schemas.yaml#/components/schemas/EventMetadata'

    ContactEmailUnlinkData:
      title: ContactEmailUnlinkData
      type: object
      required:
        - contact_id
        - email_id
      properties:
        contact_id:
          type: string
          format: uuid
          description: Contact UUID
        email_id:
          type: string
          format: uuid
          description: Email UUID being unlinked
        reason:
          type: string
          description: Optional reason for unlinking
