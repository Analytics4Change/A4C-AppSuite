asyncapi: 2.6.0
info:
  title: A4C Domain Events
  version: 1.0.0
  description: |
    Event-driven architecture specification for Analytics4Change platform.
    All events capture WHO, WHAT, WHEN, and most importantly WHY changes occur.
  contact:
    name: A4C Development Team
  license:
    name: Private
servers:
  development:
    url: postgresql://localhost:54322/postgres
    protocol: postgresql
    description: Local Supabase development instance
  production:
    url: postgresql://{project-ref}.supabase.co:5432/postgres
    protocol: postgresql
    description: Production Supabase instance
    variables:
      project-ref:
        default: tmrjlswbsxmbglmaclxu
        description: Supabase project reference
defaultContentType: application/json
channels:
  domain_events:
    description: Main event stream for all domain events
    publish:
      summary: Publish domain events to the system
      operationId: publishDomainEvent
      message:
        oneOf:
          - name: user.synced_from_auth
            title: User Synced from Auth
            summary: User information synchronized from Supabase Auth
            contentType: application/json
            payload:
              title: UserSyncedFromAuthEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.synced_from_auth
                event_data:
                  title: UserSyncedFromAuthData
                  type: object
                  required:
                    - auth_user_id
                    - email
                    - is_active
                  properties:
                    auth_user_id:
                      type: string
                      format: uuid
                      description: Supabase Auth User ID
                    email:
                      type: string
                      format: email
                    name:
                      type: string
                    is_active:
                      type: boolean
                    reason:
                      type: string
                      description: Reason for sync
                      examples:
                        - Initial user sync after registration
                        - Periodic sync to ensure consistency
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.organization_switched
            title: User Organization Switched
            summary: User switched their active organization context
            contentType: application/json
            payload:
              title: UserOrgSwitchedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.organization_switched
                event_data:
                  title: UserOrgSwitchedData
                  type: object
                  required:
                    - user_id
                    - from_organization_id
                    - to_organization_id
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    from_organization_id:
                      type: string
                      format: uuid
                      nullable: true
                    to_organization_id:
                      type: string
                      format: uuid
                    reason:
                      type: string
                      description: Reason for organization switch
                      examples:
                        - User selected different organization from dropdown
                        - Automatic switch after single org access granted
                        - Session initialization with default organization
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.deactivated
            title: User Deactivated
            summary: A user has been deactivated within an organization
            contentType: application/json
            payload:
              title: UserDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.deactivated
                event_data:
                  title: UserDeactivatedData
                  type: object
                  required:
                    - user_id
                    - org_id
                    - deactivated_at
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                      description: Organization from which the user is being deactivated
                    deactivated_at:
                      type: string
                      format: date-time
                    reason:
                      type: string
                      description: Optional reason for deactivation
                      examples:
                        - Account suspended
                        - End of contract
                        - User requested
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.reactivated
            title: User Reactivated
            summary: A deactivated user has been reactivated within an organization
            contentType: application/json
            payload:
              title: UserReactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.reactivated
                event_data:
                  title: UserReactivatedData
                  type: object
                  required:
                    - user_id
                    - org_id
                    - reactivated_at
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                      description: Organization in which the user is being reactivated
                    reactivated_at:
                      type: string
                      format: date-time
                    reason:
                      type: string
                      description: Optional reason for reactivation
                      examples:
                        - Account restored
                        - Contract renewed
                        - Admin decision
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.deleted
            title: User Deleted
            summary: >-
              A deactivated user has been permanently deleted from an
              organization
            contentType: application/json
            payload:
              title: UserDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.deleted
                event_data:
                  title: UserDeletedData
                  type: object
                  required:
                    - user_id
                    - org_id
                    - deleted_at
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                      description: Organization from which the user is being deleted
                    deleted_at:
                      type: string
                      format: date-time
                    reason:
                      type: string
                      description: Optional reason for deletion
                      examples:
                        - User requested account deletion
                        - Inactive account cleanup
                        - Policy violation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.invited
            title: User Invited
            summary: An invitation has been sent to a user to join an organization
            contentType: application/json
            payload:
              title: UserInvitedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: >-
                    Invitation UUID (user lifecycle events keyed by
                    invitation_id before user exists)
                stream_type:
                  type: string
                  const: user
                  description: >-
                    Events emitted on user aggregate (invitation is part of user
                    lifecycle)
                event_type:
                  type: string
                  const: user.invited
                event_data:
                  title: UserInvitedData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - first_name
                    - last_name
                    - roles
                    - token
                    - expires_at
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                      description: Unique identifier for this invitation
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the user is being invited to
                    email:
                      type: string
                      format: email
                      description: Email address of the invited user
                      examples:
                        - admin@provider.com
                        - clinician@healthcare.org
                    first_name:
                      type: string
                      maxLength: 100
                      description: First name of the invited user
                    last_name:
                      type: string
                      maxLength: 100
                      description: Last name of the invited user
                    roles:
                      type: array
                      minItems: 0
                      description: >
                        Roles to assign when invitation is accepted. Empty array
                        = user has no

                        permissions until roles are assigned by organization
                        admin. Supports

                        both canonical system roles and custom
                        organization-defined roles.

                        Each role includes a denormalized name snapshot for
                        display purposes.
                      items:
                        title: RoleAssignment
                        type: object
                        description: >-
                          Role assignment reference (used in invitations and
                          acceptances)
                        required:
                          - role_id
                        properties:
                          role_id:
                            type: string
                            format: uuid
                            description: UUID of the role to assign
                          role_name:
                            type: string
                            maxLength: 100
                            description: >-
                              Denormalized role name snapshot for display (e.g.,
                              "Program Manager - Aspen")
                      examples:
                        - - role_id: 11111111-1111-1111-1111-111111111111
                            role_name: super_admin
                        - - role_id: 550e8400-e29b-41d4-a716-446655440001
                            role_name: Program Manager - Aspen
                          - role_id: 550e8400-e29b-41d4-a716-446655440002
                            role_name: Clinician
                    token:
                      type: string
                      description: >-
                        Cryptographically secure invitation token (256 bits,
                        base64url encoded)
                      examples:
                        - xK9m2nP4qR7sT1vW3xY5zA8bC0dE2fG4hI6jK8lM0nO
                    expires_at:
                      type: string
                      format: date-time
                      description: >-
                        When the invitation expires (default 7 days from
                        creation)
                      examples:
                        - '2025-11-25T13:54:00.000Z'
                    access_start_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        First date the user can access the org after accepting
                        (NULL = immediate)
                      examples:
                        - '2025-01-15'
                        - null
                    access_expiration_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        Date the user's access will expire (NULL = no
                        expiration)
                      examples:
                        - '2025-12-31'
                        - null
                    notification_preferences:
                      description: Initial notification preferences for the user
                      title: NotificationPreferences
                      type: object
                      properties:
                        email:
                          type: boolean
                          default: true
                          description: Whether to send email notifications
                        sms:
                          title: SmsNotificationPreference
                          type: object
                          description: SMS notification settings
                          properties:
                            enabled:
                              type: boolean
                              default: false
                              description: Whether to send SMS notifications
                            phone_id:
                              type: string
                              format: uuid
                              nullable: true
                              description: >-
                                UUID of the phone to use for SMS (from
                                user_phones or user_org_phone_overrides)
                        in_app:
                          type: boolean
                          default: false
                          description: >-
                            Whether to send in-app notifications (future
                            feature)
                    phones:
                      type: array
                      items:
                        title: InvitationPhone
                        type: object
                        description: Phone number to create when invitation is accepted
                        required:
                          - label
                          - type
                          - number
                        properties:
                          label:
                            type: string
                            description: Human-readable label (e.g., "Mobile", "Work")
                            examples:
                              - Mobile
                              - Work
                              - Home
                          type:
                            type: string
                            title: PhoneType
                            enum:
                              - mobile
                              - office
                              - fax
                              - emergency
                          number:
                            type: string
                            description: Phone number (E.164 format recommended)
                            examples:
                              - '+15551234567'
                              - 555-123-4567
                          countryCode:
                            type: string
                            default: '+1'
                            description: Country code prefix
                            examples:
                              - '+1'
                              - '+44'
                          smsCapable:
                            type: boolean
                            default: false
                            description: Whether this phone can receive SMS notifications
                          isPrimary:
                            type: boolean
                            default: false
                            description: Whether this is the primary phone
                      description: >-
                        Phone numbers to create when invitation is accepted
                        (optional)
                      examples:
                        - - label: Mobile
                            type: mobile
                            number: '+15551234567'
                            countryCode: '+1'
                            smsCapable: true
                            isPrimary: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.revoked
            title: Invitation Revoked
            summary: >-
              A pending invitation has been revoked (typically during workflow
              compensation)
            contentType: application/json
            payload:
              title: InvitationRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Invitation UUID being revoked
                stream_type:
                  type: string
                  const: invitation
                  description: Events emitted on invitation aggregate
                event_type:
                  type: string
                  const: invitation.revoked
                event_data:
                  title: InvitationRevokedData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - revoked_at
                    - reason
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                      description: Invitation being revoked
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the invitation belonged to
                    email:
                      type: string
                      format: email
                      description: Email of the user whose invitation was revoked
                    revoked_at:
                      type: string
                      format: date-time
                      description: Timestamp when the invitation was revoked
                    reason:
                      allOf:
                        - type: string
                          title: InvitationRevocationReason
                          enum:
                            - workflow_failure
                            - manual_revocation
                            - organization_deactivated
                        - description: >
                            Reason for revocation:

                            - workflow_failure: Saga compensation during failed
                            organization bootstrap

                            - manual_revocation: Administrator manually revoked
                            the invitation

                            - organization_deactivated: Organization was
                            deactivated, invalidating invitations
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.accepted
            title: Invitation Accepted
            summary: A user has accepted an invitation and joined the organization
            contentType: application/json
            payload:
              title: InvitationAcceptedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Invitation UUID that was accepted
                stream_type:
                  type: string
                  const: invitation
                event_type:
                  type: string
                  const: invitation.accepted
                event_data:
                  title: InvitationAcceptedData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - user_id
                    - email
                    - roles
                    - accepted_at
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                    user_id:
                      type: string
                      format: uuid
                      description: User ID created in auth system
                    email:
                      type: string
                      format: email
                    roles:
                      type: array
                      minItems: 0
                      description: >
                        Snapshot of roles from the invitation that were assigned
                        to the user.

                        Empty array = user accepted with no roles (will have no
                        permissions until admin assigns).

                        The actual role grants are emitted as separate
                        user.role.assigned events.
                      items:
                        title: RoleAssignment
                        type: object
                        description: >-
                          Role assignment reference (used in invitations and
                          acceptances)
                        required:
                          - role_id
                        properties:
                          role_id:
                            type: string
                            format: uuid
                            description: UUID of the role to assign
                          role_name:
                            type: string
                            maxLength: 100
                            description: >-
                              Denormalized role name snapshot for display (e.g.,
                              "Program Manager - Aspen")
                    accepted_at:
                      type: string
                      format: date-time
                    access_start_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        First date the user can access the org (copied from
                        invitation)
                    access_expiration_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        Date the user's access will expire (copied from
                        invitation)
                    notification_preferences:
                      description: >-
                        Notification preferences (copied from invitation to
                        user_organizations_projection)
                      title: NotificationPreferences
                      type: object
                      properties:
                        email:
                          type: boolean
                          default: true
                          description: Whether to send email notifications
                        sms:
                          title: SmsNotificationPreference
                          type: object
                          description: SMS notification settings
                          properties:
                            enabled:
                              type: boolean
                              default: false
                              description: Whether to send SMS notifications
                            phone_id:
                              type: string
                              format: uuid
                              nullable: true
                              description: >-
                                UUID of the phone to use for SMS (from
                                user_phones or user_org_phone_overrides)
                        in_app:
                          type: boolean
                          default: false
                          description: >-
                            Whether to send in-app notifications (future
                            feature)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.expired
            title: Invitation Expired
            summary: An invitation has expired without being accepted
            contentType: application/json
            payload:
              title: InvitationExpiredEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: invitation
                event_type:
                  type: string
                  const: invitation.expired
                event_data:
                  title: InvitationExpiredData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - expired_at
                    - original_expires_at
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                    email:
                      type: string
                      format: email
                    expired_at:
                      type: string
                      format: date-time
                      description: When the system processed the expiration
                    original_expires_at:
                      type: string
                      format: date-time
                      description: Original expiration date from the invitation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.resent
            title: Invitation Resent
            summary: An existing invitation was resent to a user (new token generated)
            contentType: application/json
            payload:
              title: InvitationResentEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID (invitation lifecycle events keyed by org)
                stream_type:
                  type: string
                  const: organization
                  description: Events emitted on organization aggregate
                event_type:
                  type: string
                  const: invitation.resent
                event_data:
                  title: InvitationResentData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - token
                    - expires_at
                    - resent_by
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                      description: The existing invitation ID being resent
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the invitation belongs to
                    email:
                      type: string
                      format: email
                      description: Email address of the invited user
                    token:
                      type: string
                      description: >-
                        New cryptographically secure token generated for this
                        resend
                    expires_at:
                      type: string
                      format: date-time
                      description: New expiration time (typically 7 days from resend)
                    resent_by:
                      type: string
                      format: uuid
                      description: User ID who triggered the resend
                    previous_token:
                      type: string
                      description: Previous token that was invalidated (for audit trail)
                    resend_count:
                      type: integer
                      minimum: 1
                      description: Number of times this invitation has been resent
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.email.sent
            title: Invitation Email Sent
            summary: An invitation email has been successfully sent to a user
            contentType: application/json
            payload:
              title: InvitationEmailSentEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID (email sent events keyed by org)
                stream_type:
                  type: string
                  const: organization
                  description: Events emitted on organization aggregate
                event_type:
                  type: string
                  const: invitation.email.sent
                event_data:
                  title: InvitationEmailSentData
                  type: object
                  required:
                    - org_id
                    - invitation_id
                    - email
                    - sent_at
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the invitation belongs to
                    invitation_id:
                      type: string
                      format: uuid
                      description: The invitation ID for which email was sent
                    email:
                      type: string
                      format: email
                      description: Email address that received the invitation
                    sent_at:
                      type: string
                      format: date-time
                      description: Timestamp when the email was sent
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.created
            title: Organization Created
            summary: A new organization has been created in the hierarchy
            contentType: application/json
            payload:
              title: OrganizationCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.created
                event_data:
                  title: OrganizationCreationData
                  type: object
                  required:
                    - name
                    - slug
                    - type
                    - path
                  properties:
                    name:
                      type: string
                      maxLength: 200
                      description: Human-readable organization name
                      examples:
                        - ACME Healthcare Services
                        - North Campus
                    display_name:
                      type: string
                      maxLength: 200
                      description: Display name for UI (may differ from name)
                    slug:
                      type: string
                      maxLength: 100
                      pattern: ^[a-z0-9-]+$
                      description: URL-friendly identifier
                      examples:
                        - acme-healthcare
                        - north-campus
                    type:
                      allOf:
                        - type: string
                          title: OrganizationType
                          enum:
                            - platform_owner
                            - provider
                            - provider_partner
                        - description: >
                            Organization type determining access patterns and
                            capabilities:

                            - platform_owner: A4C internal organization
                            (impersonation capability)

                            - provider: Healthcare organizations serving clients
                            (data owners)

                            - provider_partner: External stakeholders (VARs,
                            families, courts - access via grants)
                    partner_type:
                      allOf:
                        - type: string
                          title: PartnerType
                          enum:
                            - var
                            - family
                            - court
                            - other
                        - description: >
                            Partner organization subtype (required when
                            type=provider_partner):

                            - var: Value-Added Reseller (requires subdomain,
                            gets portal access)

                            - family: Family access partner (no subdomain,
                            limited dashboard views)

                            - court: Court system partner (no subdomain, limited
                            dashboard views)

                            - other: Other stakeholder partner (no subdomain,
                            limited dashboard views)
                    referring_partner_id:
                      type: string
                      format: uuid
                      description: >-
                        UUID of the partner organization that referred this
                        provider (NULL if not referred)
                    path:
                      type: string
                      description: ltree hierarchical path
                      examples:
                        - root.org_acme_healthcare
                        - root.org_acme_healthcare.north_campus
                    parent_path:
                      type: string
                      description: >-
                        Parent organization ltree path (NULL for root
                        organizations)
                    tax_number:
                      type: string
                      maxLength: 50
                      description: Tax identification number
                    phone_number:
                      type: string
                      maxLength: 20
                      description: Primary phone number
                    timezone:
                      type: string
                      default: America/New_York
                      description: Organization timezone
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.updated
            title: Organization Updated
            summary: Organization information has been updated
            contentType: application/json
            payload:
              title: OrganizationUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.updated
                event_data:
                  title: OrganizationUpdateData
                  type: object
                  required:
                    - organization_id
                    - updatable_fields
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: UUID of the organization being updated
                    name:
                      type: string
                      maxLength: 200
                      description: Updated organization name (only present if changed)
                    display_name:
                      type: string
                      maxLength: 200
                      description: Updated display name (only present if changed)
                    timezone:
                      type: string
                      description: Updated timezone (only present if changed)
                      examples:
                        - America/New_York
                        - America/Chicago
                        - America/Los_Angeles
                    is_active:
                      type: boolean
                      description: Updated active status (only present if changed)
                    updatable_fields:
                      type: array
                      items:
                        type: string
                        title: OrgUpdatableFields
                        enum:
                          - name
                          - display_name
                          - timezone
                          - is_active
                        description: Fields that can be updated on an organization
                      description: List of fields that can be updated on an organization
                      examples:
                        - - name
                          - display_name
                        - - timezone
                        - - is_active
                    previous_values:
                      type: object
                      description: Previous values of updated fields (for audit trail)
                      additionalProperties: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.activated
            title: Organization Activated
            summary: >-
              Organization has been activated after successful bootstrap
              provisioning
            contentType: application/json
            payload:
              title: OrganizationActivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.activated
                event_data:
                  title: OrganizationActivatedData
                  type: object
                  required:
                    - org_id
                    - activated_at
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    activated_at:
                      type: string
                      format: date-time
                      description: Timestamp when organization was activated
                    previous_is_active:
                      type: boolean
                      description: Previous active status (for idempotency tracking)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.deactivated
            title: Organization Deactivated
            summary: >-
              Organization has been deactivated (billing, compliance,
              operational)
            contentType: application/json
            payload:
              title: OrganizationDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.deactivated
                event_data:
                  title: OrganizationDeactivationData
                  type: object
                  required:
                    - organization_id
                    - deactivation_type
                    - effective_date
                    - cascade_to_children
                    - login_blocked
                    - role_assignment_blocked
                    - existing_users_affected
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                    deactivation_type:
                      type: string
                      title: DeactivationReason
                      enum:
                        - billing_suspension
                        - compliance_violation
                        - voluntary_suspension
                        - maintenance
                    effective_date:
                      type: string
                      format: date-time
                    cascade_to_children:
                      type: boolean
                      description: Whether deactivation affects child organizations
                    login_blocked:
                      type: boolean
                      description: >-
                        Whether authentication is blocked (Platform Owner use
                        case)
                    role_assignment_blocked:
                      type: boolean
                      description: >-
                        Whether new role assignments are blocked (Descendant OU
                        use case)
                    existing_users_affected:
                      type: boolean
                      description: Whether current user sessions are terminated
                    reactivation_conditions:
                      type: array
                      items:
                        type: string
                      description: Conditions that must be met for reactivation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.subdomain.dns_created
            title: Organization Subdomain DNS Created
            summary: DNS CNAME record created in Cloudflare for organization subdomain
            contentType: application/json
            payload:
              title: OrganizationSubdomainDnsCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.subdomain.dns_created
                event_data:
                  title: SubdomainDnsCreatedData
                  type: object
                  required:
                    - subdomain
                    - cloudflare_record_id
                    - dns_record_type
                    - dns_record_value
                  properties:
                    subdomain:
                      type: string
                      description: Subdomain name (e.g., "acme-healthcare")
                      examples:
                        - acme-healthcare
                        - poc-test1-20251212
                    cloudflare_record_id:
                      type: string
                      description: Cloudflare DNS record ID
                    cloudflare_zone_id:
                      type: string
                      description: Cloudflare zone ID
                    dns_record_type:
                      allOf:
                        - type: string
                          title: DNSRecordType
                          enum:
                            - CNAME
                            - A
                        - description: DNS record type
                    dns_record_value:
                      type: string
                      description: DNS record target value
                      examples:
                        - a4c.firstovertheline.com
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.subdomain.verified
            title: Organization Subdomain Verified
            summary: DNS resolution verified for organization subdomain
            contentType: application/json
            payload:
              title: OrganizationSubdomainVerifiedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.subdomain.verified
                event_data:
                  title: SubdomainVerifiedData
                  type: object
                  required:
                    - domain
                    - verified
                    - verified_at
                  properties:
                    domain:
                      type: string
                      description: Full domain that was verified
                      examples:
                        - acme-healthcare.firstovertheline.com
                    verified:
                      type: boolean
                      description: Whether DNS verification succeeded
                    verified_at:
                      type: string
                      format: date-time
                      description: Timestamp when verification completed
                    verification_method:
                      allOf:
                        - type: string
                          title: VerificationMethod
                          enum:
                            - dns_quorum
                            - development
                        - description: >-
                            Method used for verification (dns_quorum for
                            production, development for dev mode)
                    verification_attempts:
                      type: integer
                      description: Number of verification attempts made
                    mode:
                      allOf:
                        - type: string
                          title: VerificationMode
                          enum:
                            - production
                            - development
                            - mock
                        - description: Workflow execution mode
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.dns.removed
            title: Organization DNS Removed
            summary: DNS record removed during cleanup or compensation
            contentType: application/json
            payload:
              title: OrganizationDnsRemovedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.dns.removed
                event_data:
                  title: OrganizationDnsRemovedData
                  type: object
                  required:
                    - subdomain
                    - fqdn
                    - status
                  properties:
                    subdomain:
                      type: string
                      description: Subdomain name that was removed
                      examples:
                        - acme-healthcare
                    fqdn:
                      type: string
                      description: Fully qualified domain name
                      examples:
                        - acme-healthcare.firstovertheline.com
                    record_id:
                      type: string
                      description: Cloudflare DNS record ID (when successfully deleted)
                    status:
                      type: string
                      title: DNSRemovalStatus
                      description: Status of DNS record removal during cleanup
                      enum:
                        - deleted
                        - not_found
                        - error
                    error:
                      type: string
                      description: Error message (when status is 'error')
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.direct_care_settings_updated
            title: Organization Direct Care Settings Updated
            summary: Direct care workflow routing settings updated for an organization
            contentType: application/json
            payload:
              title: OrganizationDirectCareSettingsUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.direct_care_settings_updated
                event_data:
                  title: DirectCareSettingsUpdateData
                  type: object
                  required:
                    - organization_id
                    - settings
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    settings:
                      title: DirectCareSettings
                      type: object
                      description: Feature flags for direct care workflow routing
                      properties:
                        enable_staff_client_mapping:
                          type: boolean
                          default: false
                          description: >
                            When true: Notifications go only to staff assigned
                            to the specific client.

                            When false: Notifications go to all staff at the
                            client's org unit.
                        enable_schedule_enforcement:
                          type: boolean
                          default: false
                          description: >
                            When true: Only staff currently on schedule receive
                            notifications.

                            When false: Any staff (assigned or at OU) receive
                            notifications.
                    previous_settings:
                      title: DirectCareSettings
                      type: object
                      description: Feature flags for direct care workflow routing
                      properties:
                        enable_staff_client_mapping:
                          type: boolean
                          default: false
                          description: >
                            When true: Notifications go only to staff assigned
                            to the specific client.

                            When false: Notifications go to all staff at the
                            client's org unit.
                        enable_schedule_enforcement:
                          type: boolean
                          default: false
                          description: >
                            When true: Only staff currently on schedule receive
                            notifications.

                            When false: Any staff (assigned or at OU) receive
                            notifications.
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.initiated
            title: Organization Bootstrap Initiated
            summary: >-
              Bootstrap process started for new provider or provider_partner
              organization
            contentType: application/json
            payload:
              title: OrganizationBootstrapInitiatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID (generated for new org)
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.initiated
                event_data:
                  title: OrganizationBootstrapInitiationData
                  type: object
                  required:
                    - organization_type
                    - organization_name
                    - admin_email
                    - bootstrap_id
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                      description: >-
                        Unique identifier for this bootstrap process (for
                        tracking)
                    organization_type:
                      allOf:
                        - type: string
                          title: ImpersonationTargetOrgType
                          enum:
                            - provider
                            - provider_partner
                        - description: Type of organization being bootstrapped
                    organization_name:
                      type: string
                      maxLength: 200
                      description: Human-readable organization name
                      examples:
                        - ACME Healthcare Services
                        - XYZ Consulting Partners
                    admin_email:
                      type: string
                      format: email
                      description: Email address for the initial organization administrator
                      examples:
                        - admin@acmehealthcare.com
                        - director@xyzconsulting.com
                    slug:
                      type: string
                      pattern: ^[a-z0-9_]+$
                      description: >-
                        URL-safe organization identifier (auto-generated if not
                        provided)
                      examples:
                        - acme_healthcare
                        - xyz_consulting
                    timezone:
                      type: string
                      default: America/New_York
                      description: Organization timezone (IANA format)
                    contacts:
                      type: array
                      items:
                        title: BootstrapContactInput
                        type: object
                        description: >-
                          Contact input for bootstrap workflow with temp_id for
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - first_name
                          - last_name
                        properties:
                          temp_id:
                            type: string
                            description: >-
                              Temporary ID for correlation during bootstrap
                              (maps to real UUID)
                            examples:
                              - contact-1
                              - contact-admin
                          label:
                            type: string
                            maxLength: 200
                            description: User-defined contact label
                            examples:
                              - Primary Administrator
                              - Billing Contact
                          type:
                            type: string
                            title: ContactType
                            enum:
                              - administrative
                              - billing
                              - technical
                              - emergency
                              - stakeholder
                          first_name:
                            type: string
                            maxLength: 100
                            description: Contact first name
                          last_name:
                            type: string
                            maxLength: 100
                            description: Contact last name
                          email:
                            type: string
                            format: email
                            description: >-
                              Contact's direct email (for contact record, not
                              separate email entity)
                          title:
                            type: string
                            maxLength: 100
                            description: Job title
                          department:
                            type: string
                            maxLength: 100
                            description: Department
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary contact
                      description: Contacts to create (each has temp_id for correlation)
                    phones:
                      type: array
                      items:
                        title: BootstrapPhoneInput
                        type: object
                        description: >-
                          Phone input for bootstrap workflow with contact
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - number
                        properties:
                          temp_id:
                            type: string
                            description: Temporary ID for this phone
                            examples:
                              - phone-1
                              - phone-main
                          contact_ref:
                            type: string
                            nullable: true
                            description: >-
                              temp_id of contact to link to (null = org-level
                              only)
                            examples:
                              - contact-1
                              - null
                          label:
                            type: string
                            maxLength: 200
                            description: Phone label
                            examples:
                              - Main Office
                              - Emergency Hotline
                          type:
                            type: string
                            title: PhoneType
                            enum:
                              - mobile
                              - office
                              - fax
                              - emergency
                          number:
                            type: string
                            maxLength: 20
                            description: Phone number
                            examples:
                              - +1-555-123-4567
                          extension:
                            type: string
                            maxLength: 10
                            description: Phone extension
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary phone
                      description: >-
                        Phones to create (contact_ref links to contact temp_id,
                        null = org-level)
                    emails:
                      type: array
                      items:
                        title: BootstrapEmailInput
                        type: object
                        description: >-
                          Email input for bootstrap workflow with contact
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - address
                        properties:
                          temp_id:
                            type: string
                            description: Temporary ID for this email
                            examples:
                              - email-1
                              - email-info
                          contact_ref:
                            type: string
                            nullable: true
                            description: >-
                              temp_id of contact to link to (null = org-level
                              only)
                            examples:
                              - contact-1
                              - null
                          label:
                            type: string
                            maxLength: 200
                            description: Email label
                            examples:
                              - Main Office
                              - Billing Department
                          type:
                            type: string
                            title: EmailType
                            enum:
                              - work
                              - personal
                              - billing
                              - support
                              - main
                          address:
                            type: string
                            format: email
                            description: Email address
                            examples:
                              - info@acme-healthcare.com
                              - billing@acme-healthcare.com
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary email
                      description: >-
                        Emails to create (contact_ref links to contact temp_id,
                        null = org-level)
                    addresses:
                      type: array
                      items:
                        title: BootstrapAddressInput
                        type: object
                        description: >-
                          Address input for bootstrap workflow with contact
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - street1
                          - city
                          - state
                          - zip_code
                        properties:
                          temp_id:
                            type: string
                            description: Temporary ID for this address
                            examples:
                              - addr-1
                              - addr-main
                          contact_ref:
                            type: string
                            nullable: true
                            description: >-
                              temp_id of contact to link to (null = org-level
                              only)
                            examples:
                              - contact-1
                              - null
                          label:
                            type: string
                            maxLength: 200
                            description: Address label
                            examples:
                              - Main Office
                              - Billing Address
                          type:
                            type: string
                            title: AddressType
                            enum:
                              - physical
                              - mailing
                              - billing
                          street1:
                            type: string
                            maxLength: 255
                            description: Street address line 1
                          street2:
                            type: string
                            maxLength: 255
                            description: Street address line 2
                          city:
                            type: string
                            maxLength: 100
                            description: City
                          state:
                            type: string
                            maxLength: 50
                            description: State/Province
                          zip_code:
                            type: string
                            maxLength: 20
                            description: ZIP/Postal code
                          country:
                            type: string
                            maxLength: 3
                            default: US
                            description: Country code (ISO 3166-1 alpha-2 or alpha-3)
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary address
                      description: >-
                        Addresses to create (contact_ref links to contact
                        temp_id, null = org-level)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.completed
            title: Organization Bootstrap Completed
            summary: Organization bootstrap process successfully completed
            contentType: application/json
            payload:
              title: OrganizationBootstrapCompletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.completed
                event_data:
                  title: OrganizationBootstrapCompletionData
                  type: object
                  required:
                    - bootstrap_id
                    - organization_id
                    - admin_role_assigned
                    - permissions_granted
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                    organization_id:
                      type: string
                      format: uuid
                    admin_role_assigned:
                      allOf:
                        - type: string
                          title: AdminRole
                          enum:
                            - provider_admin
                            - partner_admin
                        - description: Role assigned to the initial administrator
                    permissions_granted:
                      type: integer
                      description: Number of permissions granted to the admin role
                    ltree_path:
                      type: string
                      description: Organization ltree path in hierarchy
                      examples:
                        - root.org_acme_healthcare
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.failed
            title: Organization Bootstrap Failed
            summary: Organization bootstrap process failed, triggering compensation
            contentType: application/json
            payload:
              title: OrganizationBootstrapFailedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.failed
                event_data:
                  title: OrganizationBootstrapFailureData
                  type: object
                  required:
                    - bootstrap_id
                    - failure_stage
                    - error_message
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                    failure_stage:
                      allOf:
                        - type: string
                          title: BootstrapFailureStage
                          enum:
                            - organization_creation
                            - dns_provisioning
                            - admin_user_creation
                            - role_assignment
                            - permission_grants
                            - invitation_email
                        - description: Stage where bootstrap process failed
                    error_message:
                      type: string
                      description: Error details for troubleshooting
                    partial_cleanup_required:
                      type: boolean
                      description: Whether partial resources need cleanup
                      default: false
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.cancelled
            title: Organization Bootstrap Cancelled
            summary: Organization bootstrap process cancelled and cleanup completed
            contentType: application/json
            payload:
              title: OrganizationBootstrapCancelledEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.cancelled
                event_data:
                  title: OrganizationBootstrapCancellationData
                  type: object
                  required:
                    - bootstrap_id
                    - cleanup_completed
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                    cleanup_completed:
                      type: boolean
                      description: >-
                        Whether all partial resources were successfully cleaned
                        up
                    cleanup_actions:
                      type: array
                      items:
                        type: string
                      description: List of cleanup actions performed
                      examples:
                        - removed_dns_records
                        - removed_partial_database_records
                        - deleted_pending_invitations
                    original_failure_stage:
                      type: string
                      description: Original stage where bootstrap failed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: program.created
            title: Program Created
            summary: >-
              A new program has been created within an organization during
              bootstrap
            contentType: application/json
            payload:
              title: ProgramCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID that owns this program
                stream_type:
                  type: string
                  description: >-
                    Program events use organization as stream type during
                    bootstrap
                  const: organization
                event_type:
                  type: string
                  const: program.created
                event_data:
                  title: ProgramCreationData
                  type: object
                  required:
                    - program_id
                    - organization_id
                    - name
                  properties:
                    program_id:
                      type: string
                      format: uuid
                      description: Unique identifier for the program
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization that owns this program
                    name:
                      type: string
                      maxLength: 200
                      description: Human-readable program name
                      examples:
                        - Default Program
                        - Substance Abuse Recovery
                        - Mental Health Services
                    description:
                      type: string
                      maxLength: 1000
                      description: Description of the program and its services
                    is_default:
                      type: boolean
                      default: true
                      description: Whether this is the default program for the organization
                    settings:
                      type: object
                      description: Program-specific configuration settings
                      additionalProperties: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.created
            title: Organization Unit Created
            summary: >-
              A new organization unit has been created within a provider
              hierarchy
            contentType: application/json
            payload:
              title: OrganizationUnitCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization Unit UUID
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.created
                event_data:
                  title: OrganizationUnitCreationData
                  type: object
                  required:
                    - organization_id
                    - name
                    - slug
                    - path
                    - parent_path
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        UUID of the root organization (provider) this unit
                        belongs to
                    name:
                      type: string
                      maxLength: 200
                      description: Human-readable organization unit name
                      examples:
                        - Northern Region
                        - Oak Street Group Home
                        - Pediatrics Department
                    display_name:
                      type: string
                      maxLength: 200
                      description: Display name for UI (may differ from name)
                    slug:
                      type: string
                      maxLength: 100
                      pattern: ^[a-z0-9_]+$
                      description: >-
                        URL-friendly identifier (ltree-safe, underscores only
                        for PG15 compatibility)
                      examples:
                        - northern_region
                        - oak_street
                        - pediatrics
                    path:
                      type: string
                      description: Full ltree hierarchical path (nlevel > 2)
                      examples:
                        - root.org_acme_healthcare.northern_region
                        - root.org_acme_healthcare.northern_region.oak_street
                    parent_path:
                      type: string
                      description: Parent organization/unit ltree path
                      examples:
                        - root.org_acme_healthcare
                        - root.org_acme_healthcare.northern_region
                    timezone:
                      type: string
                      default: America/New_York
                      description: Organization unit timezone
                      examples:
                        - America/New_York
                        - America/Chicago
                        - America/Los_Angeles
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.updated
            title: Organization Unit Updated
            summary: Organization unit information has been updated
            contentType: application/json
            payload:
              title: OrganizationUnitUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization Unit UUID
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.updated
                event_data:
                  title: OrganizationUnitUpdateData
                  type: object
                  required:
                    - organization_unit_id
                    - updatable_fields
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                      description: UUID of the organization unit being updated
                    name:
                      type: string
                      maxLength: 200
                      description: Updated organization unit name (only present if changed)
                    display_name:
                      type: string
                      maxLength: 200
                      description: Updated display name (only present if changed)
                    timezone:
                      type: string
                      description: Updated timezone (only present if changed)
                    updatable_fields:
                      type: array
                      items:
                        type: string
                        title: OUUpdatableFields
                        enum:
                          - name
                          - display_name
                          - timezone
                        description: Fields that can be updated on an organization unit
                      description: >-
                        List of fields that can be updated on an organization
                        unit
                      examples:
                        - - name
                          - display_name
                        - - timezone
                    previous_values:
                      type: object
                      description: Previous values of updated fields (for audit trail)
                      additionalProperties: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.deactivated
            title: Organization Unit Deactivated
            summary: Organization unit has been frozen - no role assignments allowed
            contentType: application/json
            payload:
              title: OrganizationUnitDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.deactivated
                event_data:
                  title: OrganizationUnitDeactivationData
                  type: object
                  required:
                    - organization_unit_id
                    - path
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    path:
                      type: string
                      description: ltree path of deactivated unit
                      examples:
                        - root.org_acme_healthcare.northern_region
                    cascade_effect:
                      type: string
                      default: role_assignment_blocked
                      description: >
                        Effect of deactivation:

                        - role_assignment_blocked: New role assignments to this
                        OU and descendants are blocked
                      const: role_assignment_blocked
                    descendants_affected:
                      type: boolean
                      default: true
                      description: >-
                        Whether descendant OUs are also affected (always true
                        via cascade)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.reactivated
            title: Organization Unit Reactivated
            summary: >-
              Organization unit has been unfrozen - role assignments allowed
              again
            contentType: application/json
            payload:
              title: OrganizationUnitReactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.reactivated
                event_data:
                  title: OrganizationUnitReactivationData
                  type: object
                  required:
                    - organization_unit_id
                    - path
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    path:
                      type: string
                      description: ltree path of reactivated unit
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.deleted
            title: Organization Unit Deleted
            summary: >-
              Organization unit has been soft-deleted (requires zero role
              references)
            contentType: application/json
            payload:
              title: OrganizationUnitDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.deleted
                event_data:
                  title: OrganizationUnitDeletionData
                  type: object
                  required:
                    - organization_unit_id
                    - deleted_path
                    - had_role_references
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    deleted_path:
                      type: string
                      description: ltree path being soft-deleted
                      examples:
                        - root.org_acme_healthcare.northern_region.oak_street
                    had_role_references:
                      type: boolean
                      description: >-
                        Whether any role references existed (must be false to
                        delete)
                      default: false
                    deletion_type:
                      type: string
                      default: soft_delete
                      description: Always soft_delete (sets deleted_at timestamp)
                      const: soft_delete
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.moved
            title: Organization Unit Moved
            summary: >-
              Organization unit has been reparented to a different parent
              (future capability)
            contentType: application/json
            payload:
              title: OrganizationUnitMovedEvent
              type: object
              description: >-
                Future capability - organization unit reparented to different
                parent
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.moved
                event_data:
                  title: OrganizationUnitMoveData
                  type: object
                  required:
                    - organization_unit_id
                    - old_path
                    - new_path
                    - old_parent_path
                    - new_parent_path
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    old_path:
                      type: string
                      description: Previous ltree path
                      examples:
                        - root.org_acme_healthcare.northern_region.oak_street
                    new_path:
                      type: string
                      description: New ltree path after move
                      examples:
                        - root.org_acme_healthcare.southern_region.oak_street
                    old_parent_path:
                      type: string
                      description: Previous parent ltree path
                    new_parent_path:
                      type: string
                      description: New parent ltree path
                    descendants_moved:
                      type: integer
                      description: Number of descendant OUs that had their paths updated
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.failed_events_viewed
            title: Failed Events Viewed
            summary: Platform admin viewed failed domain events for observability
            contentType: application/json
            payload:
              title: PlatformAdminFailedEventsViewedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Platform admin user ID who viewed the events
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.failed_events_viewed
                event_data:
                  title: PlatformAdminFailedEventsViewedData
                  type: object
                  required:
                    - filters
                  properties:
                    filters:
                      title: FailedEventsViewedFilters
                      type: object
                      description: Filters applied when viewing failed events
                      properties:
                        limit:
                          type: integer
                          description: Maximum number of events returned
                          default: 25
                        offset:
                          type: integer
                          description: Pagination offset
                          default: 0
                        event_type:
                          type: string
                          nullable: true
                          description: Filter by specific event type
                        stream_type:
                          type: string
                          nullable: true
                          description: Filter by specific stream type
                        since:
                          type: string
                          format: date-time
                          nullable: true
                          description: Filter events created after this timestamp
                        include_dismissed:
                          type: boolean
                          description: Whether to include dismissed events
                          default: false
                        sort_by:
                          default: created_at
                          allOf:
                            - type: string
                              title: SortBy
                              enum:
                                - created_at
                                - event_type
                            - description: Column to sort by
                        sort_order:
                          default: desc
                          allOf:
                            - type: string
                              title: SortOrder
                              enum:
                                - asc
                                - desc
                            - description: Sort direction
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.event_retry_attempted
            title: Event Retry Attempted
            summary: Platform admin attempted to retry a failed event
            contentType: application/json
            payload:
              title: PlatformAdminEventRetryAttemptedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Platform admin user ID who attempted the retry
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.event_retry_attempted
                event_data:
                  title: PlatformAdminEventRetryAttemptedData
                  type: object
                  required:
                    - target_event_id
                    - target_event_type
                    - target_stream_type
                    - target_stream_id
                    - retry_success
                  properties:
                    target_event_id:
                      type: string
                      format: uuid
                      description: ID of the event that was retried
                    target_event_type:
                      type: string
                      description: Type of the event that was retried
                    target_stream_type:
                      type: string
                      description: Stream type of the event that was retried
                    target_stream_id:
                      type: string
                      format: uuid
                      description: Stream ID of the event that was retried
                    original_error:
                      type: string
                      description: The error message before retry attempt
                    retry_success:
                      type: boolean
                      description: Whether the retry succeeded
                    new_error:
                      type: string
                      nullable: true
                      description: Error message after retry (null if successful)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.processing_stats_viewed
            title: Processing Stats Viewed
            summary: Platform admin viewed event processing statistics
            contentType: application/json
            payload:
              title: PlatformAdminProcessingStatsViewedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Platform admin user ID who viewed the stats
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.processing_stats_viewed
                event_data:
                  title: PlatformAdminProcessingStatsViewedData
                  type: object
                  required:
                    - timestamp
                  properties:
                    timestamp:
                      type: string
                      format: date-time
                      description: When the stats were viewed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.event_dismissed
            title: Event Dismissed
            summary: Platform admin dismissed a failed event
            contentType: application/json
            payload:
              title: PlatformAdminEventDismissedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Unique ID for this audit event (gen_random_uuid)
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.event_dismissed
                event_data:
                  title: PlatformAdminEventDismissedData
                  type: object
                  required:
                    - target_event_id
                    - target_event_type
                    - target_stream_type
                    - target_stream_id
                  properties:
                    target_event_id:
                      type: string
                      format: uuid
                      description: ID of the event that was dismissed
                    target_event_type:
                      type: string
                      description: Type of the event that was dismissed
                    target_stream_type:
                      type: string
                      description: Stream type of the event that was dismissed
                    target_stream_id:
                      type: string
                      format: uuid
                      description: Stream ID of the event that was dismissed
                    reason:
                      type: string
                      nullable: true
                      description: Optional reason provided for dismissing the event
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.event_undismissed
            title: Event Undismissed
            summary: Platform admin reversed dismissal of a failed event
            contentType: application/json
            payload:
              title: PlatformAdminEventUndismissedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Unique ID for this audit event (gen_random_uuid)
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.event_undismissed
                event_data:
                  title: PlatformAdminEventUndismissedData
                  type: object
                  required:
                    - target_event_id
                    - target_event_type
                    - target_stream_type
                    - target_stream_id
                  properties:
                    target_event_id:
                      type: string
                      format: uuid
                      description: ID of the event that was undismissed
                    target_event_type:
                      type: string
                      description: Type of the event that was undismissed
                    target_stream_type:
                      type: string
                      description: Stream type of the event that was undismissed
                    target_stream_id:
                      type: string
                      format: uuid
                      description: Stream ID of the event that was undismissed
                    previous_dismissed_by:
                      type: string
                      format: uuid
                      description: User ID who originally dismissed the event
                    previous_dismiss_reason:
                      type: string
                      nullable: true
                      description: Reason that was given when event was dismissed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: email.created
            title: Email Created
            summary: A new email address has been created for an organization
            contentType: application/json
            payload:
              title: EmailCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Email UUID
                stream_type:
                  type: string
                  const: email
                event_type:
                  type: string
                  const: email.created
                event_data:
                  title: EmailCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - address
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined email label for identification
                      examples:
                        - Main Office
                        - Billing Department
                        - Support Inbox
                        - Emergency Contact
                    type:
                      allOf:
                        - type: string
                          title: EmailType
                          enum:
                            - work
                            - personal
                            - billing
                            - support
                            - main
                        - description: |
                            Structured email type:
                            - work: Business/work email address
                            - personal: Personal email address
                            - billing: Billing and invoicing email
                            - support: Support and helpdesk email
                            - main: Primary organizational email
                    address:
                      type: string
                      format: email
                      maxLength: 255
                      description: Email address
                      examples:
                        - info@acme-healthcare.com
                        - billing@acme-healthcare.com
                        - support@acme-healthcare.com
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary email for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Email active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: email.updated
            title: Email Updated
            summary: Email address information has been updated
            contentType: application/json
            payload:
              title: EmailUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Email UUID
                stream_type:
                  type: string
                  const: email
                event_type:
                  type: string
                  const: email.updated
                event_data:
                  title: EmailUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated email label
                    type:
                      allOf:
                        - type: string
                          title: EmailType
                          enum:
                            - work
                            - personal
                            - billing
                            - support
                            - main
                        - description: Updated email type
                    address:
                      type: string
                      format: email
                      maxLength: 255
                      description: Updated email address
                    is_primary:
                      type: boolean
                      description: Updated primary email flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: email.deleted
            title: Email Deleted
            summary: Email address has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: EmailDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Email UUID being deleted
                stream_type:
                  type: string
                  const: email
                event_type:
                  type: string
                  const: email.deleted
                event_data:
                  title: EmailDeletionData
                  type: object
                  required:
                    - email_id
                    - organization_id
                  properties:
                    email_id:
                      type: string
                      format: uuid
                      description: UUID of email being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this email
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Email address no longer in use
                        - Duplicate email removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.created
            title: Contact Created
            summary: A new contact has been created for an organization
            contentType: application/json
            payload:
              title: ContactCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.created
                event_data:
                  title: ContactCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - first_name
                    - last_name
                    - email
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined contact label for identification
                      examples:
                        - John Smith - Billing Contact
                        - Emergency Contact - Jane Doe
                        - Technical Lead - Bob Johnson
                    type:
                      allOf:
                        - type: string
                          title: ContactType
                          enum:
                            - administrative
                            - billing
                            - technical
                            - emergency
                            - stakeholder
                        - description: |
                            Structured contact type:
                            - administrative: Administrative/platform contact
                            - billing: Billing and invoicing contact
                            - technical: Technical support contact
                            - emergency: Emergency contact person
                            - stakeholder: General stakeholder contact
                    first_name:
                      type: string
                      maxLength: 100
                      description: Contact first name
                    last_name:
                      type: string
                      maxLength: 100
                      description: Contact last name
                    email:
                      type: string
                      format: email
                      maxLength: 255
                      description: Contact email address
                    phone:
                      type: string
                      maxLength: 20
                      description: >-
                        Optional phone number (deprecated - use
                        phones_projection table for structured phone data)
                    title:
                      type: string
                      maxLength: 100
                      description: Job title (e.g., 'Chief Financial Officer')
                    department:
                      type: string
                      maxLength: 100
                      description: Department (e.g., 'Finance', 'IT')
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary contact for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Contact active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.updated
            title: Contact Updated
            summary: Contact information has been updated
            contentType: application/json
            payload:
              title: ContactUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.updated
                event_data:
                  title: ContactUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated contact label
                    type:
                      allOf:
                        - type: string
                          title: ContactType
                          enum:
                            - administrative
                            - billing
                            - technical
                            - emergency
                            - stakeholder
                        - description: Updated contact type
                    first_name:
                      type: string
                      maxLength: 100
                      description: Updated first name
                    last_name:
                      type: string
                      maxLength: 100
                      description: Updated last name
                    email:
                      type: string
                      format: email
                      maxLength: 255
                      description: Updated email address
                    phone:
                      type: string
                      maxLength: 20
                      description: >-
                        Updated phone number (deprecated - use
                        phones_projection)
                    title:
                      type: string
                      maxLength: 100
                      description: Updated job title
                    department:
                      type: string
                      maxLength: 100
                      description: Updated department
                    is_primary:
                      type: boolean
                      description: Updated primary contact flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.deleted
            title: Contact Deleted
            summary: Contact has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: ContactDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID being deleted
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.deleted
                event_data:
                  title: ContactDeletionData
                  type: object
                  required:
                    - contact_id
                    - organization_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: UUID of contact being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this contact
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Contact no longer with organization
                        - Duplicate contact removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.user.linked
            title: Contact User Linked
            summary: >-
              Contact has been linked to a user (same person is both contact and
              user)
            contentType: application/json
            payload:
              title: ContactUserLinkedEvent
              type: object
              description: Emitted when a contact is linked to a user (same person is both)
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.user.linked
                event_data:
                  title: ContactUserLinkData
                  type: object
                  description: Data for linking a contact to a user
                  required:
                    - contact_id
                    - user_id
                    - organization_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact being linked
                    user_id:
                      type: string
                      format: uuid
                      description: User being linked to contact
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization context for this link
                    linked_reason:
                      type: string
                      description: >-
                        Reason for linking (invitation acceptance, manual link,
                        etc.)
                      examples:
                        - invitation_accepted
                        - manual_link
                        - bootstrap_auto_link
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.user.unlinked
            title: Contact User Unlinked
            summary: Contact has been unlinked from a user
            contentType: application/json
            payload:
              title: ContactUserUnlinkedEvent
              type: object
              description: Emitted when a contact is unlinked from a user
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.user.unlinked
                event_data:
                  title: ContactUserUnlinkData
                  type: object
                  description: Data for unlinking a contact from a user
                  required:
                    - contact_id
                    - user_id
                    - organization_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact being unlinked
                    user_id:
                      type: string
                      format: uuid
                      description: User being unlinked from contact
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization context for this unlink
                    unlinked_reason:
                      type: string
                      description: Reason for unlinking
                      examples:
                        - user_deleted
                        - manual_unlink
                        - duplicate_resolution
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.created
            title: Phone Created
            summary: A new phone number has been created for an organization
            contentType: application/json
            payload:
              title: PhoneCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Phone UUID
                stream_type:
                  type: string
                  const: phone
                event_type:
                  type: string
                  const: phone.created
                event_data:
                  title: PhoneCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - number
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined phone label for identification
                      examples:
                        - Main Office
                        - Emergency Hotline
                        - After Hours - On Call
                        - Billing Department
                    type:
                      allOf:
                        - type: string
                          title: PhoneType
                          enum:
                            - mobile
                            - office
                            - fax
                            - emergency
                        - description: |
                            Structured phone type:
                            - mobile: Mobile/cell phone number
                            - office: Office landline number
                            - fax: Fax number
                            - emergency: Emergency contact number
                    number:
                      type: string
                      maxLength: 20
                      description: Phone number (formatted or raw)
                      examples:
                        - +1-555-123-4567
                        - '5551234567'
                        - +1 (555) 123-4567
                        - 555-123-4567
                    extension:
                      type: string
                      maxLength: 10
                      description: Optional phone extension
                      examples:
                        - x1234
                        - '1234'
                        - ext. 5678
                    country_code:
                      type: string
                      maxLength: 5
                      default: '+1'
                      description: Country calling code
                      examples:
                        - '+1'
                        - '+44'
                        - '+33'
                        - '+49'
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary phone for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Phone active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.updated
            title: Phone Updated
            summary: Phone number information has been updated
            contentType: application/json
            payload:
              title: PhoneUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Phone UUID
                stream_type:
                  type: string
                  const: phone
                event_type:
                  type: string
                  const: phone.updated
                event_data:
                  title: PhoneUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated phone label
                    type:
                      allOf:
                        - type: string
                          title: PhoneType
                          enum:
                            - mobile
                            - office
                            - fax
                            - emergency
                        - description: Updated phone type
                    number:
                      type: string
                      maxLength: 20
                      description: Updated phone number
                    extension:
                      type: string
                      maxLength: 10
                      description: Updated phone extension
                    country_code:
                      type: string
                      maxLength: 5
                      description: Updated country calling code
                    is_primary:
                      type: boolean
                      description: Updated primary phone flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.deleted
            title: Phone Deleted
            summary: Phone number has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: PhoneDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Phone UUID being deleted
                stream_type:
                  type: string
                  const: phone
                event_type:
                  type: string
                  const: phone.deleted
                event_data:
                  title: PhoneDeletionData
                  type: object
                  required:
                    - phone_id
                    - organization_id
                  properties:
                    phone_id:
                      type: string
                      format: uuid
                      description: UUID of phone being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this phone
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Phone number no longer in use
                        - Duplicate phone removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: address.created
            title: Address Created
            summary: A new address has been created for an organization
            contentType: application/json
            payload:
              title: AddressCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Address UUID
                stream_type:
                  type: string
                  const: address
                event_type:
                  type: string
                  const: address.created
                event_data:
                  title: AddressCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - street1
                    - city
                    - state
                    - zip_code
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined address label for identification
                      examples:
                        - Main Office
                        - Billing Department
                        - Satellite Location - North Campus
                    type:
                      allOf:
                        - type: string
                          title: AddressType
                          enum:
                            - physical
                            - mailing
                            - billing
                        - description: >
                            Structured address type:

                            - physical: Business location (where services are
                            delivered)

                            - mailing: Mailing address (for correspondence)

                            - billing: Billing address (for invoices and
                            payments)
                    street1:
                      type: string
                      maxLength: 255
                      description: Address line 1 (street number and name)
                      examples:
                        - 123 Main Street
                        - 456 Healthcare Plaza, Suite 200
                    street2:
                      type: string
                      maxLength: 255
                      description: Optional address line 2 (apartment, suite, unit)
                      examples:
                        - Suite 200
                        - Building B
                        - Unit 5
                    city:
                      type: string
                      maxLength: 100
                      description: City or locality
                      examples:
                        - San Francisco
                        - New York
                        - Toronto
                    state:
                      type: string
                      maxLength: 50
                      description: State, province, or region code
                      examples:
                        - CA
                        - NY
                        - 'ON'
                        - BC
                    zip_code:
                      type: string
                      maxLength: 20
                      description: Postal code or ZIP code
                      examples:
                        - '94102'
                        - '10001'
                        - M5H 2N2
                    country:
                      type: string
                      maxLength: 3
                      default: US
                      description: ISO country code (ISO 3166-1 alpha-2)
                      examples:
                        - US
                        - CA
                        - GB
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary address for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Address active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: address.updated
            title: Address Updated
            summary: Address information has been updated
            contentType: application/json
            payload:
              title: AddressUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Address UUID
                stream_type:
                  type: string
                  const: address
                event_type:
                  type: string
                  const: address.updated
                event_data:
                  title: AddressUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated address label
                    type:
                      allOf:
                        - type: string
                          title: AddressType
                          enum:
                            - physical
                            - mailing
                            - billing
                        - description: Updated address type
                    street1:
                      type: string
                      maxLength: 255
                      description: Updated address line 1
                    street2:
                      type: string
                      maxLength: 255
                      description: Updated address line 2
                    city:
                      type: string
                      maxLength: 100
                      description: Updated city
                    state:
                      type: string
                      maxLength: 50
                      description: Updated state/province
                    zip_code:
                      type: string
                      maxLength: 20
                      description: Updated postal code
                    country:
                      type: string
                      maxLength: 3
                      description: Updated country code
                    is_primary:
                      type: boolean
                      description: Updated primary address flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: address.deleted
            title: Address Deleted
            summary: Address has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: AddressDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Address UUID being deleted
                stream_type:
                  type: string
                  const: address
                event_type:
                  type: string
                  const: address.deleted
                event_data:
                  title: AddressDeletionData
                  type: object
                  required:
                    - address_id
                    - organization_id
                  properties:
                    address_id:
                      type: string
                      format: uuid
                      description: UUID of address being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this address
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Address no longer in use
                        - Duplicate address removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.contact.linked
            title: Organization-Contact Linked
            summary: A contact has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationContactLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.contact.linked
                event_data:
                  title: OrganizationContactLinkData
                  type: object
                  required:
                    - organization_id
                    - contact_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                      examples:
                        - Primary contact assignment
                        - Multi-organization contact relationship
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.contact.unlinked
            title: Organization-Contact Unlinked
            summary: A contact has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationContactUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.contact.unlinked
                event_data:
                  title: OrganizationContactUnlinkData
                  type: object
                  required:
                    - organization_id
                    - contact_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                      examples:
                        - Contact no longer associated with organization
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.address.linked
            title: Organization-Address Linked
            summary: An address has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationAddressLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.address.linked
                event_data:
                  title: OrganizationAddressLinkData
                  type: object
                  required:
                    - organization_id
                    - address_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.address.unlinked
            title: Organization-Address Unlinked
            summary: An address has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationAddressUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.address.unlinked
                event_data:
                  title: OrganizationAddressUnlinkData
                  type: object
                  required:
                    - organization_id
                    - address_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.phone.linked
            title: Organization-Phone Linked
            summary: A phone number has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationPhoneLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.phone.linked
                event_data:
                  title: OrganizationPhoneLinkData
                  type: object
                  required:
                    - organization_id
                    - phone_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.phone.unlinked
            title: Organization-Phone Unlinked
            summary: A phone number has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationPhoneUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.phone.unlinked
                event_data:
                  title: OrganizationPhoneUnlinkData
                  type: object
                  required:
                    - organization_id
                    - phone_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.email.linked
            title: Organization-Email Linked
            summary: An email address has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationEmailLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.email.linked
                event_data:
                  title: OrganizationEmailLinkData
                  type: object
                  required:
                    - organization_id
                    - email_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.email.unlinked
            title: Organization-Email Unlinked
            summary: An email address has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationEmailUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.email.unlinked
                event_data:
                  title: OrganizationEmailUnlinkData
                  type: object
                  required:
                    - organization_id
                    - email_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.phone.linked
            title: Contact-Phone Linked
            summary: A phone number has been linked to a contact
            contentType: application/json
            payload:
              title: ContactPhoneLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.phone.linked
                event_data:
                  title: ContactPhoneLinkData
                  type: object
                  required:
                    - contact_id
                    - phone_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.phone.unlinked
            title: Contact-Phone Unlinked
            summary: A phone number has been unlinked from a contact
            contentType: application/json
            payload:
              title: ContactPhoneUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.phone.unlinked
                event_data:
                  title: ContactPhoneUnlinkData
                  type: object
                  required:
                    - contact_id
                    - phone_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.address.linked
            title: Contact-Address Linked
            summary: An address has been linked to a contact
            contentType: application/json
            payload:
              title: ContactAddressLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.address.linked
                event_data:
                  title: ContactAddressLinkData
                  type: object
                  required:
                    - contact_id
                    - address_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.address.unlinked
            title: Contact-Address Unlinked
            summary: An address has been unlinked from a contact
            contentType: application/json
            payload:
              title: ContactAddressUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.address.unlinked
                event_data:
                  title: ContactAddressUnlinkData
                  type: object
                  required:
                    - contact_id
                    - address_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.email.linked
            title: Contact-Email Linked
            summary: An email address has been linked to a contact
            contentType: application/json
            payload:
              title: ContactEmailLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.email.linked
                event_data:
                  title: ContactEmailLinkData
                  type: object
                  required:
                    - contact_id
                    - email_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.email.unlinked
            title: Contact-Email Unlinked
            summary: An email address has been unlinked from a contact
            contentType: application/json
            payload:
              title: ContactEmailUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.email.unlinked
                event_data:
                  title: ContactEmailUnlinkData
                  type: object
                  required:
                    - contact_id
                    - email_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.address.linked
            title: Phone-Address Linked
            summary: >-
              An address has been linked to a phone number (e.g., location of
              phone)
            contentType: application/json
            payload:
              title: PhoneAddressLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (phone_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: phone.address.linked
                event_data:
                  title: PhoneAddressLinkData
                  type: object
                  required:
                    - phone_id
                    - address_id
                  properties:
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being linked (e.g., location of phone)
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.address.unlinked
            title: Phone-Address Unlinked
            summary: An address has been unlinked from a phone number
            contentType: application/json
            payload:
              title: PhoneAddressUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (phone_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: phone.address.unlinked
                event_data:
                  title: PhoneAddressUnlinkData
                  type: object
                  required:
                    - phone_id
                    - address_id
                  properties:
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: permission.defined
            title: Permission Defined
            summary: A new permission has been created in the system
            contentType: application/json
            payload:
              title: PermissionDefinedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Permission UUID
                stream_type:
                  type: string
                  const: permission
                event_type:
                  type: string
                  const: permission.defined
                event_data:
                  title: PermissionDefinedData
                  type: object
                  required:
                    - applet
                    - action
                    - description
                    - scope_type
                    - requires_mfa
                  properties:
                    applet:
                      type: string
                      description: Functional module (medication, provider, client, etc.)
                      examples:
                        - medication
                        - provider
                        - client
                        - user
                    action:
                      type: string
                      description: Specific capability within the applet
                      examples:
                        - create
                        - view
                        - update
                        - delete
                        - approve
                        - impersonate
                    description:
                      type: string
                      description: Human-readable explanation of the permission
                      examples:
                        - Create new medication prescriptions
                        - View client records
                        - Impersonate users for support operations
                    scope_type:
                      type: string
                      title: ScopeType
                      enum:
                        - global
                        - org
                      description: >-
                        Permission scope type (global for platform-wide, org for
                        organization-scoped)
                    requires_mfa:
                      type: boolean
                      description: Whether MFA is required to use this permission
                      default: false
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.created
            title: Role Created
            summary: A new role has been created
            contentType: application/json
            payload:
              title: RoleCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.created
                event_data:
                  title: RoleCreatedData
                  type: object
                  required:
                    - name
                    - description
                  properties:
                    name:
                      type: string
                      description: Role identifier
                      examples:
                        - super_admin
                        - provider_admin
                        - facility_admin
                        - clinician
                    description:
                      type: string
                      description: Human-readable role description
                      examples:
                        - Platform-wide administrator with all permissions
                        - Organization administrator with org-scoped permissions
                    zitadel_org_id:
                      type: string
                      nullable: true
                      description: Zitadel organization ID (NULL for super_admin)
                    org_hierarchy_scope:
                      type: string
                      nullable: true
                      description: >-
                        ltree path for hierarchical scoping (NULL for
                        super_admin)
                      examples:
                        - org_acme_healthcare_001
                        - org_acme_healthcare_001.facility_456
                    display_name:
                      type: string
                      nullable: true
                      description: Human-readable display name for the role
                      examples:
                        - Provider Administrator
                        - Facility Manager
                        - Clinician
                    organization_id:
                      type: string
                      format: uuid
                      nullable: true
                      description: >-
                        Organization UUID for org-scoped roles (NULL for
                        super_admin)
                    scope:
                      type: string
                      title: RoleScope
                      description: >-
                        Scope level of a role (global for super_admin,
                        organization/unit for org-scoped)
                      enum:
                        - global
                        - organization
                        - unit
                    is_system_role:
                      type: boolean
                      nullable: true
                      description: Whether this is a system-defined role (not user-created)
                      default: false
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.permission.granted
            title: Role Permission Granted
            summary: A permission has been granted to a role
            contentType: application/json
            payload:
              title: RolePermissionGrantedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.permission.granted
                event_data:
                  title: RolePermissionGrantedData
                  type: object
                  required:
                    - permission_id
                    - permission_name
                  properties:
                    permission_id:
                      type: string
                      format: uuid
                      description: UUID of the permission being granted
                    permission_name:
                      type: string
                      description: Full permission identifier (for logging)
                      pattern: ^[a-z_]+\.[a-z_]+$
                      examples:
                        - medication.create
                        - provider.impersonate
                        - client.view
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.permission.revoked
            title: Role Permission Revoked
            summary: A permission has been revoked from a role
            contentType: application/json
            payload:
              title: RolePermissionRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.permission.revoked
                event_data:
                  title: RolePermissionRevokedData
                  type: object
                  required:
                    - permission_id
                    - permission_name
                    - revocation_reason
                  properties:
                    permission_id:
                      type: string
                      format: uuid
                    permission_name:
                      type: string
                      pattern: ^[a-z_]+\.[a-z_]+$
                    revocation_reason:
                      type: string
                      description: Explanation for permission removal
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.updated
            title: Role Updated
            summary: A role's name or description has been updated
            contentType: application/json
            payload:
              title: RoleUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.updated
                event_data:
                  title: RoleUpdatedData
                  type: object
                  properties:
                    name:
                      type: string
                      description: Updated role name (if changed)
                      examples:
                        - provider_admin
                        - facility_admin
                        - custom_clinician
                    description:
                      type: string
                      description: Updated role description (if changed)
                      examples:
                        - Organization administrator with org-scoped permissions
                        - Facility-specific administrative role
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.deactivated
            title: Role Deactivated
            summary: A role has been deactivated (frozen)
            contentType: application/json
            payload:
              title: RoleDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.deactivated
                event_data:
                  title: RoleDeactivatedData
                  type: object
                  required:
                    - reason
                  properties:
                    reason:
                      type: string
                      description: Reason for deactivation
                      examples:
                        - >-
                          Role no longer needed for current organizational
                          structure
                        - Temporarily freezing role for security review
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.reactivated
            title: Role Reactivated
            summary: A role has been reactivated
            contentType: application/json
            payload:
              title: RoleReactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.reactivated
                event_data:
                  title: RoleReactivatedData
                  type: object
                  properties:
                    reason:
                      type: string
                      description: Reason for reactivation
                      examples:
                        - Security review completed, role reinstated
                        - Role needed again for new hire onboarding
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.deleted
            title: Role Deleted
            summary: A role has been soft-deleted
            contentType: application/json
            payload:
              title: RoleDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.deleted
                event_data:
                  title: RoleDeletedData
                  type: object
                  required:
                    - reason
                  properties:
                    reason:
                      type: string
                      description: Reason for deletion
                      examples:
                        - Role permanently removed after deprecation period
                        - Custom role no longer needed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.role.assigned
            title: User Role Assigned
            summary: A role has been assigned to a user
            contentType: application/json
            payload:
              title: UserRoleAssignedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.role.assigned
                event_data:
                  title: UserRoleAssignedData
                  type: object
                  required:
                    - role_id
                    - role_name
                    - org_id
                    - scope_path
                    - assigned_by
                  properties:
                    role_id:
                      type: string
                      format: uuid
                      description: UUID of the role being assigned
                    role_name:
                      type: string
                      description: Role identifier for logging
                      examples:
                        - super_admin
                        - provider_admin
                    org_id:
                      type: string
                      description: >-
                        Organization ID ('*' for super_admin, specific org for
                        others)
                      examples:
                        - '*'
                        - acme_healthcare_001
                    scope_path:
                      type: string
                      description: >-
                        ltree hierarchy path ('*' for global, specific path for
                        scoped)
                      examples:
                        - '*'
                        - org_acme_healthcare_001
                        - org_acme_healthcare_001.facility_456
                    assigned_by:
                      type: string
                      format: uuid
                      description: User who performed the assignment
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.role.revoked
            title: User Role Revoked
            summary: A role has been revoked from a user
            contentType: application/json
            payload:
              title: UserRoleRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.role.revoked
                event_data:
                  title: UserRoleRevokedData
                  type: object
                  required:
                    - role_id
                    - role_name
                    - org_id
                    - revoked_by
                  properties:
                    role_id:
                      type: string
                      format: uuid
                    role_name:
                      type: string
                    org_id:
                      type: string
                    revoked_by:
                      type: string
                      format: uuid
                      description: User who performed the revocation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: access_grant.created
            title: Access Grant Created
            summary: A cross-tenant access grant has been created
            contentType: application/json
            payload:
              title: AccessGrantCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Access grant UUID
                stream_type:
                  type: string
                  const: access_grant
                event_type:
                  type: string
                  const: access_grant.created
                event_data:
                  title: AccessGrantCreatedData
                  type: object
                  required:
                    - consultant_org_id
                    - provider_org_id
                    - scope
                    - authorization_type
                  properties:
                    consultant_org_id:
                      type: string
                      description: Provider Partner organization ID
                    consultant_user_id:
                      type: string
                      format: uuid
                      nullable: true
                      description: Specific user (NULL for org-wide grant)
                    provider_org_id:
                      type: string
                      description: Target Provider organization ID
                    scope:
                      type: string
                      title: GrantScope
                      enum:
                        - organization_unit
                        - client_specific
                      description: >-
                        Scope of data access granted (organization_unit uses
                        scope_id for OU hierarchy)
                    scope_id:
                      type: string
                      format: uuid
                      nullable: true
                      description: Specific resource ID if scoped
                    authorization_type:
                      type: string
                      title: GrantAuthorizationType
                      enum:
                        - var_contract
                        - court_order
                        - family_participation
                        - social_services_assignment
                        - emergency_access
                      description: Legal/business basis for granting cross-tenant access
                    legal_reference:
                      type: string
                      nullable: true
                      description: Court order number, consent form ID, contract reference
                      examples:
                        - Court Order
                        - Parental Consent Form
                        - VAR Contract
                    expires_at:
                      type: string
                      format: date-time
                      nullable: true
                      description: Expiration timestamp for time-limited access
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: access_grant.revoked
            title: Access Grant Revoked
            summary: A cross-tenant access grant has been revoked
            contentType: application/json
            payload:
              title: AccessGrantRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Access grant UUID
                stream_type:
                  type: string
                  const: access_grant
                event_type:
                  type: string
                  const: access_grant.revoked
                event_data:
                  title: AccessGrantRevokedData
                  type: object
                  required:
                    - grant_id
                    - revoked_by
                    - revocation_reason
                  properties:
                    grant_id:
                      type: string
                      format: uuid
                      description: UUID of the grant being revoked
                    revoked_by:
                      type: string
                      format: uuid
                      description: User who revoked the grant
                    revocation_reason:
                      type: string
                      description: Explanation for revocation
                      examples:
                        - Court case closed, access no longer required
                        - VAR contract terminated
                        - Parental custody changed, consent withdrawn
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
    subscribe:
      summary: Subscribe to domain events
      operationId: onDomainEvent
      message:
        oneOf:
          - name: user.synced_from_auth
            title: User Synced from Auth
            summary: User information synchronized from Supabase Auth
            contentType: application/json
            payload:
              title: UserSyncedFromAuthEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.synced_from_auth
                event_data:
                  title: UserSyncedFromAuthData
                  type: object
                  required:
                    - auth_user_id
                    - email
                    - is_active
                  properties:
                    auth_user_id:
                      type: string
                      format: uuid
                      description: Supabase Auth User ID
                    email:
                      type: string
                      format: email
                    name:
                      type: string
                    is_active:
                      type: boolean
                    reason:
                      type: string
                      description: Reason for sync
                      examples:
                        - Initial user sync after registration
                        - Periodic sync to ensure consistency
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.organization_switched
            title: User Organization Switched
            summary: User switched their active organization context
            contentType: application/json
            payload:
              title: UserOrgSwitchedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.organization_switched
                event_data:
                  title: UserOrgSwitchedData
                  type: object
                  required:
                    - user_id
                    - from_organization_id
                    - to_organization_id
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    from_organization_id:
                      type: string
                      format: uuid
                      nullable: true
                    to_organization_id:
                      type: string
                      format: uuid
                    reason:
                      type: string
                      description: Reason for organization switch
                      examples:
                        - User selected different organization from dropdown
                        - Automatic switch after single org access granted
                        - Session initialization with default organization
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.deactivated
            title: User Deactivated
            summary: A user has been deactivated within an organization
            contentType: application/json
            payload:
              title: UserDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.deactivated
                event_data:
                  title: UserDeactivatedData
                  type: object
                  required:
                    - user_id
                    - org_id
                    - deactivated_at
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                      description: Organization from which the user is being deactivated
                    deactivated_at:
                      type: string
                      format: date-time
                    reason:
                      type: string
                      description: Optional reason for deactivation
                      examples:
                        - Account suspended
                        - End of contract
                        - User requested
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.reactivated
            title: User Reactivated
            summary: A deactivated user has been reactivated within an organization
            contentType: application/json
            payload:
              title: UserReactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.reactivated
                event_data:
                  title: UserReactivatedData
                  type: object
                  required:
                    - user_id
                    - org_id
                    - reactivated_at
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                      description: Organization in which the user is being reactivated
                    reactivated_at:
                      type: string
                      format: date-time
                    reason:
                      type: string
                      description: Optional reason for reactivation
                      examples:
                        - Account restored
                        - Contract renewed
                        - Admin decision
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.deleted
            title: User Deleted
            summary: >-
              A deactivated user has been permanently deleted from an
              organization
            contentType: application/json
            payload:
              title: UserDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.deleted
                event_data:
                  title: UserDeletedData
                  type: object
                  required:
                    - user_id
                    - org_id
                    - deleted_at
                  properties:
                    user_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                      description: Organization from which the user is being deleted
                    deleted_at:
                      type: string
                      format: date-time
                    reason:
                      type: string
                      description: Optional reason for deletion
                      examples:
                        - User requested account deletion
                        - Inactive account cleanup
                        - Policy violation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.invited
            title: User Invited
            summary: An invitation has been sent to a user to join an organization
            contentType: application/json
            payload:
              title: UserInvitedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: >-
                    Invitation UUID (user lifecycle events keyed by
                    invitation_id before user exists)
                stream_type:
                  type: string
                  const: user
                  description: >-
                    Events emitted on user aggregate (invitation is part of user
                    lifecycle)
                event_type:
                  type: string
                  const: user.invited
                event_data:
                  title: UserInvitedData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - first_name
                    - last_name
                    - roles
                    - token
                    - expires_at
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                      description: Unique identifier for this invitation
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the user is being invited to
                    email:
                      type: string
                      format: email
                      description: Email address of the invited user
                      examples:
                        - admin@provider.com
                        - clinician@healthcare.org
                    first_name:
                      type: string
                      maxLength: 100
                      description: First name of the invited user
                    last_name:
                      type: string
                      maxLength: 100
                      description: Last name of the invited user
                    roles:
                      type: array
                      minItems: 0
                      description: >
                        Roles to assign when invitation is accepted. Empty array
                        = user has no

                        permissions until roles are assigned by organization
                        admin. Supports

                        both canonical system roles and custom
                        organization-defined roles.

                        Each role includes a denormalized name snapshot for
                        display purposes.
                      items:
                        title: RoleAssignment
                        type: object
                        description: >-
                          Role assignment reference (used in invitations and
                          acceptances)
                        required:
                          - role_id
                        properties:
                          role_id:
                            type: string
                            format: uuid
                            description: UUID of the role to assign
                          role_name:
                            type: string
                            maxLength: 100
                            description: >-
                              Denormalized role name snapshot for display (e.g.,
                              "Program Manager - Aspen")
                      examples:
                        - - role_id: 11111111-1111-1111-1111-111111111111
                            role_name: super_admin
                        - - role_id: 550e8400-e29b-41d4-a716-446655440001
                            role_name: Program Manager - Aspen
                          - role_id: 550e8400-e29b-41d4-a716-446655440002
                            role_name: Clinician
                    token:
                      type: string
                      description: >-
                        Cryptographically secure invitation token (256 bits,
                        base64url encoded)
                      examples:
                        - xK9m2nP4qR7sT1vW3xY5zA8bC0dE2fG4hI6jK8lM0nO
                    expires_at:
                      type: string
                      format: date-time
                      description: >-
                        When the invitation expires (default 7 days from
                        creation)
                      examples:
                        - '2025-11-25T13:54:00.000Z'
                    access_start_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        First date the user can access the org after accepting
                        (NULL = immediate)
                      examples:
                        - '2025-01-15'
                        - null
                    access_expiration_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        Date the user's access will expire (NULL = no
                        expiration)
                      examples:
                        - '2025-12-31'
                        - null
                    notification_preferences:
                      description: Initial notification preferences for the user
                      title: NotificationPreferences
                      type: object
                      properties:
                        email:
                          type: boolean
                          default: true
                          description: Whether to send email notifications
                        sms:
                          title: SmsNotificationPreference
                          type: object
                          description: SMS notification settings
                          properties:
                            enabled:
                              type: boolean
                              default: false
                              description: Whether to send SMS notifications
                            phone_id:
                              type: string
                              format: uuid
                              nullable: true
                              description: >-
                                UUID of the phone to use for SMS (from
                                user_phones or user_org_phone_overrides)
                        in_app:
                          type: boolean
                          default: false
                          description: >-
                            Whether to send in-app notifications (future
                            feature)
                    phones:
                      type: array
                      items:
                        title: InvitationPhone
                        type: object
                        description: Phone number to create when invitation is accepted
                        required:
                          - label
                          - type
                          - number
                        properties:
                          label:
                            type: string
                            description: Human-readable label (e.g., "Mobile", "Work")
                            examples:
                              - Mobile
                              - Work
                              - Home
                          type:
                            type: string
                            title: PhoneType
                            enum:
                              - mobile
                              - office
                              - fax
                              - emergency
                          number:
                            type: string
                            description: Phone number (E.164 format recommended)
                            examples:
                              - '+15551234567'
                              - 555-123-4567
                          countryCode:
                            type: string
                            default: '+1'
                            description: Country code prefix
                            examples:
                              - '+1'
                              - '+44'
                          smsCapable:
                            type: boolean
                            default: false
                            description: Whether this phone can receive SMS notifications
                          isPrimary:
                            type: boolean
                            default: false
                            description: Whether this is the primary phone
                      description: >-
                        Phone numbers to create when invitation is accepted
                        (optional)
                      examples:
                        - - label: Mobile
                            type: mobile
                            number: '+15551234567'
                            countryCode: '+1'
                            smsCapable: true
                            isPrimary: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.revoked
            title: Invitation Revoked
            summary: >-
              A pending invitation has been revoked (typically during workflow
              compensation)
            contentType: application/json
            payload:
              title: InvitationRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Invitation UUID being revoked
                stream_type:
                  type: string
                  const: invitation
                  description: Events emitted on invitation aggregate
                event_type:
                  type: string
                  const: invitation.revoked
                event_data:
                  title: InvitationRevokedData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - revoked_at
                    - reason
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                      description: Invitation being revoked
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the invitation belonged to
                    email:
                      type: string
                      format: email
                      description: Email of the user whose invitation was revoked
                    revoked_at:
                      type: string
                      format: date-time
                      description: Timestamp when the invitation was revoked
                    reason:
                      allOf:
                        - type: string
                          title: InvitationRevocationReason
                          enum:
                            - workflow_failure
                            - manual_revocation
                            - organization_deactivated
                        - description: >
                            Reason for revocation:

                            - workflow_failure: Saga compensation during failed
                            organization bootstrap

                            - manual_revocation: Administrator manually revoked
                            the invitation

                            - organization_deactivated: Organization was
                            deactivated, invalidating invitations
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.accepted
            title: Invitation Accepted
            summary: A user has accepted an invitation and joined the organization
            contentType: application/json
            payload:
              title: InvitationAcceptedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Invitation UUID that was accepted
                stream_type:
                  type: string
                  const: invitation
                event_type:
                  type: string
                  const: invitation.accepted
                event_data:
                  title: InvitationAcceptedData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - user_id
                    - email
                    - roles
                    - accepted_at
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                    user_id:
                      type: string
                      format: uuid
                      description: User ID created in auth system
                    email:
                      type: string
                      format: email
                    roles:
                      type: array
                      minItems: 0
                      description: >
                        Snapshot of roles from the invitation that were assigned
                        to the user.

                        Empty array = user accepted with no roles (will have no
                        permissions until admin assigns).

                        The actual role grants are emitted as separate
                        user.role.assigned events.
                      items:
                        title: RoleAssignment
                        type: object
                        description: >-
                          Role assignment reference (used in invitations and
                          acceptances)
                        required:
                          - role_id
                        properties:
                          role_id:
                            type: string
                            format: uuid
                            description: UUID of the role to assign
                          role_name:
                            type: string
                            maxLength: 100
                            description: >-
                              Denormalized role name snapshot for display (e.g.,
                              "Program Manager - Aspen")
                    accepted_at:
                      type: string
                      format: date-time
                    access_start_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        First date the user can access the org (copied from
                        invitation)
                    access_expiration_date:
                      type: string
                      format: date
                      nullable: true
                      description: >-
                        Date the user's access will expire (copied from
                        invitation)
                    notification_preferences:
                      description: >-
                        Notification preferences (copied from invitation to
                        user_organizations_projection)
                      title: NotificationPreferences
                      type: object
                      properties:
                        email:
                          type: boolean
                          default: true
                          description: Whether to send email notifications
                        sms:
                          title: SmsNotificationPreference
                          type: object
                          description: SMS notification settings
                          properties:
                            enabled:
                              type: boolean
                              default: false
                              description: Whether to send SMS notifications
                            phone_id:
                              type: string
                              format: uuid
                              nullable: true
                              description: >-
                                UUID of the phone to use for SMS (from
                                user_phones or user_org_phone_overrides)
                        in_app:
                          type: boolean
                          default: false
                          description: >-
                            Whether to send in-app notifications (future
                            feature)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.expired
            title: Invitation Expired
            summary: An invitation has expired without being accepted
            contentType: application/json
            payload:
              title: InvitationExpiredEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: invitation
                event_type:
                  type: string
                  const: invitation.expired
                event_data:
                  title: InvitationExpiredData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - expired_at
                    - original_expires_at
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                    org_id:
                      type: string
                      format: uuid
                    email:
                      type: string
                      format: email
                    expired_at:
                      type: string
                      format: date-time
                      description: When the system processed the expiration
                    original_expires_at:
                      type: string
                      format: date-time
                      description: Original expiration date from the invitation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.resent
            title: Invitation Resent
            summary: An existing invitation was resent to a user (new token generated)
            contentType: application/json
            payload:
              title: InvitationResentEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID (invitation lifecycle events keyed by org)
                stream_type:
                  type: string
                  const: organization
                  description: Events emitted on organization aggregate
                event_type:
                  type: string
                  const: invitation.resent
                event_data:
                  title: InvitationResentData
                  type: object
                  required:
                    - invitation_id
                    - org_id
                    - email
                    - token
                    - expires_at
                    - resent_by
                  properties:
                    invitation_id:
                      type: string
                      format: uuid
                      description: The existing invitation ID being resent
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the invitation belongs to
                    email:
                      type: string
                      format: email
                      description: Email address of the invited user
                    token:
                      type: string
                      description: >-
                        New cryptographically secure token generated for this
                        resend
                    expires_at:
                      type: string
                      format: date-time
                      description: New expiration time (typically 7 days from resend)
                    resent_by:
                      type: string
                      format: uuid
                      description: User ID who triggered the resend
                    previous_token:
                      type: string
                      description: Previous token that was invalidated (for audit trail)
                    resend_count:
                      type: integer
                      minimum: 1
                      description: Number of times this invitation has been resent
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: invitation.email.sent
            title: Invitation Email Sent
            summary: An invitation email has been successfully sent to a user
            contentType: application/json
            payload:
              title: InvitationEmailSentEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID (email sent events keyed by org)
                stream_type:
                  type: string
                  const: organization
                  description: Events emitted on organization aggregate
                event_type:
                  type: string
                  const: invitation.email.sent
                event_data:
                  title: InvitationEmailSentData
                  type: object
                  required:
                    - org_id
                    - invitation_id
                    - email
                    - sent_at
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Organization the invitation belongs to
                    invitation_id:
                      type: string
                      format: uuid
                      description: The invitation ID for which email was sent
                    email:
                      type: string
                      format: email
                      description: Email address that received the invitation
                    sent_at:
                      type: string
                      format: date-time
                      description: Timestamp when the email was sent
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.created
            title: Organization Created
            summary: A new organization has been created in the hierarchy
            contentType: application/json
            payload:
              title: OrganizationCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.created
                event_data:
                  title: OrganizationCreationData
                  type: object
                  required:
                    - name
                    - slug
                    - type
                    - path
                  properties:
                    name:
                      type: string
                      maxLength: 200
                      description: Human-readable organization name
                      examples:
                        - ACME Healthcare Services
                        - North Campus
                    display_name:
                      type: string
                      maxLength: 200
                      description: Display name for UI (may differ from name)
                    slug:
                      type: string
                      maxLength: 100
                      pattern: ^[a-z0-9-]+$
                      description: URL-friendly identifier
                      examples:
                        - acme-healthcare
                        - north-campus
                    type:
                      allOf:
                        - type: string
                          title: OrganizationType
                          enum:
                            - platform_owner
                            - provider
                            - provider_partner
                        - description: >
                            Organization type determining access patterns and
                            capabilities:

                            - platform_owner: A4C internal organization
                            (impersonation capability)

                            - provider: Healthcare organizations serving clients
                            (data owners)

                            - provider_partner: External stakeholders (VARs,
                            families, courts - access via grants)
                    partner_type:
                      allOf:
                        - type: string
                          title: PartnerType
                          enum:
                            - var
                            - family
                            - court
                            - other
                        - description: >
                            Partner organization subtype (required when
                            type=provider_partner):

                            - var: Value-Added Reseller (requires subdomain,
                            gets portal access)

                            - family: Family access partner (no subdomain,
                            limited dashboard views)

                            - court: Court system partner (no subdomain, limited
                            dashboard views)

                            - other: Other stakeholder partner (no subdomain,
                            limited dashboard views)
                    referring_partner_id:
                      type: string
                      format: uuid
                      description: >-
                        UUID of the partner organization that referred this
                        provider (NULL if not referred)
                    path:
                      type: string
                      description: ltree hierarchical path
                      examples:
                        - root.org_acme_healthcare
                        - root.org_acme_healthcare.north_campus
                    parent_path:
                      type: string
                      description: >-
                        Parent organization ltree path (NULL for root
                        organizations)
                    tax_number:
                      type: string
                      maxLength: 50
                      description: Tax identification number
                    phone_number:
                      type: string
                      maxLength: 20
                      description: Primary phone number
                    timezone:
                      type: string
                      default: America/New_York
                      description: Organization timezone
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.updated
            title: Organization Updated
            summary: Organization information has been updated
            contentType: application/json
            payload:
              title: OrganizationUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.updated
                event_data:
                  title: OrganizationUpdateData
                  type: object
                  required:
                    - organization_id
                    - updatable_fields
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: UUID of the organization being updated
                    name:
                      type: string
                      maxLength: 200
                      description: Updated organization name (only present if changed)
                    display_name:
                      type: string
                      maxLength: 200
                      description: Updated display name (only present if changed)
                    timezone:
                      type: string
                      description: Updated timezone (only present if changed)
                      examples:
                        - America/New_York
                        - America/Chicago
                        - America/Los_Angeles
                    is_active:
                      type: boolean
                      description: Updated active status (only present if changed)
                    updatable_fields:
                      type: array
                      items:
                        type: string
                        title: OrgUpdatableFields
                        enum:
                          - name
                          - display_name
                          - timezone
                          - is_active
                        description: Fields that can be updated on an organization
                      description: List of fields that can be updated on an organization
                      examples:
                        - - name
                          - display_name
                        - - timezone
                        - - is_active
                    previous_values:
                      type: object
                      description: Previous values of updated fields (for audit trail)
                      additionalProperties: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.activated
            title: Organization Activated
            summary: >-
              Organization has been activated after successful bootstrap
              provisioning
            contentType: application/json
            payload:
              title: OrganizationActivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.activated
                event_data:
                  title: OrganizationActivatedData
                  type: object
                  required:
                    - org_id
                    - activated_at
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    activated_at:
                      type: string
                      format: date-time
                      description: Timestamp when organization was activated
                    previous_is_active:
                      type: boolean
                      description: Previous active status (for idempotency tracking)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.deactivated
            title: Organization Deactivated
            summary: >-
              Organization has been deactivated (billing, compliance,
              operational)
            contentType: application/json
            payload:
              title: OrganizationDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.deactivated
                event_data:
                  title: OrganizationDeactivationData
                  type: object
                  required:
                    - organization_id
                    - deactivation_type
                    - effective_date
                    - cascade_to_children
                    - login_blocked
                    - role_assignment_blocked
                    - existing_users_affected
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                    deactivation_type:
                      type: string
                      title: DeactivationReason
                      enum:
                        - billing_suspension
                        - compliance_violation
                        - voluntary_suspension
                        - maintenance
                    effective_date:
                      type: string
                      format: date-time
                    cascade_to_children:
                      type: boolean
                      description: Whether deactivation affects child organizations
                    login_blocked:
                      type: boolean
                      description: >-
                        Whether authentication is blocked (Platform Owner use
                        case)
                    role_assignment_blocked:
                      type: boolean
                      description: >-
                        Whether new role assignments are blocked (Descendant OU
                        use case)
                    existing_users_affected:
                      type: boolean
                      description: Whether current user sessions are terminated
                    reactivation_conditions:
                      type: array
                      items:
                        type: string
                      description: Conditions that must be met for reactivation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.subdomain.dns_created
            title: Organization Subdomain DNS Created
            summary: DNS CNAME record created in Cloudflare for organization subdomain
            contentType: application/json
            payload:
              title: OrganizationSubdomainDnsCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.subdomain.dns_created
                event_data:
                  title: SubdomainDnsCreatedData
                  type: object
                  required:
                    - subdomain
                    - cloudflare_record_id
                    - dns_record_type
                    - dns_record_value
                  properties:
                    subdomain:
                      type: string
                      description: Subdomain name (e.g., "acme-healthcare")
                      examples:
                        - acme-healthcare
                        - poc-test1-20251212
                    cloudflare_record_id:
                      type: string
                      description: Cloudflare DNS record ID
                    cloudflare_zone_id:
                      type: string
                      description: Cloudflare zone ID
                    dns_record_type:
                      allOf:
                        - type: string
                          title: DNSRecordType
                          enum:
                            - CNAME
                            - A
                        - description: DNS record type
                    dns_record_value:
                      type: string
                      description: DNS record target value
                      examples:
                        - a4c.firstovertheline.com
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.subdomain.verified
            title: Organization Subdomain Verified
            summary: DNS resolution verified for organization subdomain
            contentType: application/json
            payload:
              title: OrganizationSubdomainVerifiedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.subdomain.verified
                event_data:
                  title: SubdomainVerifiedData
                  type: object
                  required:
                    - domain
                    - verified
                    - verified_at
                  properties:
                    domain:
                      type: string
                      description: Full domain that was verified
                      examples:
                        - acme-healthcare.firstovertheline.com
                    verified:
                      type: boolean
                      description: Whether DNS verification succeeded
                    verified_at:
                      type: string
                      format: date-time
                      description: Timestamp when verification completed
                    verification_method:
                      allOf:
                        - type: string
                          title: VerificationMethod
                          enum:
                            - dns_quorum
                            - development
                        - description: >-
                            Method used for verification (dns_quorum for
                            production, development for dev mode)
                    verification_attempts:
                      type: integer
                      description: Number of verification attempts made
                    mode:
                      allOf:
                        - type: string
                          title: VerificationMode
                          enum:
                            - production
                            - development
                            - mock
                        - description: Workflow execution mode
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.dns.removed
            title: Organization DNS Removed
            summary: DNS record removed during cleanup or compensation
            contentType: application/json
            payload:
              title: OrganizationDnsRemovedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.dns.removed
                event_data:
                  title: OrganizationDnsRemovedData
                  type: object
                  required:
                    - subdomain
                    - fqdn
                    - status
                  properties:
                    subdomain:
                      type: string
                      description: Subdomain name that was removed
                      examples:
                        - acme-healthcare
                    fqdn:
                      type: string
                      description: Fully qualified domain name
                      examples:
                        - acme-healthcare.firstovertheline.com
                    record_id:
                      type: string
                      description: Cloudflare DNS record ID (when successfully deleted)
                    status:
                      type: string
                      title: DNSRemovalStatus
                      description: Status of DNS record removal during cleanup
                      enum:
                        - deleted
                        - not_found
                        - error
                    error:
                      type: string
                      description: Error message (when status is 'error')
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.direct_care_settings_updated
            title: Organization Direct Care Settings Updated
            summary: Direct care workflow routing settings updated for an organization
            contentType: application/json
            payload:
              title: OrganizationDirectCareSettingsUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.direct_care_settings_updated
                event_data:
                  title: DirectCareSettingsUpdateData
                  type: object
                  required:
                    - organization_id
                    - settings
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    settings:
                      title: DirectCareSettings
                      type: object
                      description: Feature flags for direct care workflow routing
                      properties:
                        enable_staff_client_mapping:
                          type: boolean
                          default: false
                          description: >
                            When true: Notifications go only to staff assigned
                            to the specific client.

                            When false: Notifications go to all staff at the
                            client's org unit.
                        enable_schedule_enforcement:
                          type: boolean
                          default: false
                          description: >
                            When true: Only staff currently on schedule receive
                            notifications.

                            When false: Any staff (assigned or at OU) receive
                            notifications.
                    previous_settings:
                      title: DirectCareSettings
                      type: object
                      description: Feature flags for direct care workflow routing
                      properties:
                        enable_staff_client_mapping:
                          type: boolean
                          default: false
                          description: >
                            When true: Notifications go only to staff assigned
                            to the specific client.

                            When false: Notifications go to all staff at the
                            client's org unit.
                        enable_schedule_enforcement:
                          type: boolean
                          default: false
                          description: >
                            When true: Only staff currently on schedule receive
                            notifications.

                            When false: Any staff (assigned or at OU) receive
                            notifications.
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.initiated
            title: Organization Bootstrap Initiated
            summary: >-
              Bootstrap process started for new provider or provider_partner
              organization
            contentType: application/json
            payload:
              title: OrganizationBootstrapInitiatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID (generated for new org)
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.initiated
                event_data:
                  title: OrganizationBootstrapInitiationData
                  type: object
                  required:
                    - organization_type
                    - organization_name
                    - admin_email
                    - bootstrap_id
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                      description: >-
                        Unique identifier for this bootstrap process (for
                        tracking)
                    organization_type:
                      allOf:
                        - type: string
                          title: ImpersonationTargetOrgType
                          enum:
                            - provider
                            - provider_partner
                        - description: Type of organization being bootstrapped
                    organization_name:
                      type: string
                      maxLength: 200
                      description: Human-readable organization name
                      examples:
                        - ACME Healthcare Services
                        - XYZ Consulting Partners
                    admin_email:
                      type: string
                      format: email
                      description: Email address for the initial organization administrator
                      examples:
                        - admin@acmehealthcare.com
                        - director@xyzconsulting.com
                    slug:
                      type: string
                      pattern: ^[a-z0-9_]+$
                      description: >-
                        URL-safe organization identifier (auto-generated if not
                        provided)
                      examples:
                        - acme_healthcare
                        - xyz_consulting
                    timezone:
                      type: string
                      default: America/New_York
                      description: Organization timezone (IANA format)
                    contacts:
                      type: array
                      items:
                        title: BootstrapContactInput
                        type: object
                        description: >-
                          Contact input for bootstrap workflow with temp_id for
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - first_name
                          - last_name
                        properties:
                          temp_id:
                            type: string
                            description: >-
                              Temporary ID for correlation during bootstrap
                              (maps to real UUID)
                            examples:
                              - contact-1
                              - contact-admin
                          label:
                            type: string
                            maxLength: 200
                            description: User-defined contact label
                            examples:
                              - Primary Administrator
                              - Billing Contact
                          type:
                            type: string
                            title: ContactType
                            enum:
                              - administrative
                              - billing
                              - technical
                              - emergency
                              - stakeholder
                          first_name:
                            type: string
                            maxLength: 100
                            description: Contact first name
                          last_name:
                            type: string
                            maxLength: 100
                            description: Contact last name
                          email:
                            type: string
                            format: email
                            description: >-
                              Contact's direct email (for contact record, not
                              separate email entity)
                          title:
                            type: string
                            maxLength: 100
                            description: Job title
                          department:
                            type: string
                            maxLength: 100
                            description: Department
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary contact
                      description: Contacts to create (each has temp_id for correlation)
                    phones:
                      type: array
                      items:
                        title: BootstrapPhoneInput
                        type: object
                        description: >-
                          Phone input for bootstrap workflow with contact
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - number
                        properties:
                          temp_id:
                            type: string
                            description: Temporary ID for this phone
                            examples:
                              - phone-1
                              - phone-main
                          contact_ref:
                            type: string
                            nullable: true
                            description: >-
                              temp_id of contact to link to (null = org-level
                              only)
                            examples:
                              - contact-1
                              - null
                          label:
                            type: string
                            maxLength: 200
                            description: Phone label
                            examples:
                              - Main Office
                              - Emergency Hotline
                          type:
                            type: string
                            title: PhoneType
                            enum:
                              - mobile
                              - office
                              - fax
                              - emergency
                          number:
                            type: string
                            maxLength: 20
                            description: Phone number
                            examples:
                              - +1-555-123-4567
                          extension:
                            type: string
                            maxLength: 10
                            description: Phone extension
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary phone
                      description: >-
                        Phones to create (contact_ref links to contact temp_id,
                        null = org-level)
                    emails:
                      type: array
                      items:
                        title: BootstrapEmailInput
                        type: object
                        description: >-
                          Email input for bootstrap workflow with contact
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - address
                        properties:
                          temp_id:
                            type: string
                            description: Temporary ID for this email
                            examples:
                              - email-1
                              - email-info
                          contact_ref:
                            type: string
                            nullable: true
                            description: >-
                              temp_id of contact to link to (null = org-level
                              only)
                            examples:
                              - contact-1
                              - null
                          label:
                            type: string
                            maxLength: 200
                            description: Email label
                            examples:
                              - Main Office
                              - Billing Department
                          type:
                            type: string
                            title: EmailType
                            enum:
                              - work
                              - personal
                              - billing
                              - support
                              - main
                          address:
                            type: string
                            format: email
                            description: Email address
                            examples:
                              - info@acme-healthcare.com
                              - billing@acme-healthcare.com
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary email
                      description: >-
                        Emails to create (contact_ref links to contact temp_id,
                        null = org-level)
                    addresses:
                      type: array
                      items:
                        title: BootstrapAddressInput
                        type: object
                        description: >-
                          Address input for bootstrap workflow with contact
                          correlation
                        required:
                          - temp_id
                          - label
                          - type
                          - street1
                          - city
                          - state
                          - zip_code
                        properties:
                          temp_id:
                            type: string
                            description: Temporary ID for this address
                            examples:
                              - addr-1
                              - addr-main
                          contact_ref:
                            type: string
                            nullable: true
                            description: >-
                              temp_id of contact to link to (null = org-level
                              only)
                            examples:
                              - contact-1
                              - null
                          label:
                            type: string
                            maxLength: 200
                            description: Address label
                            examples:
                              - Main Office
                              - Billing Address
                          type:
                            type: string
                            title: AddressType
                            enum:
                              - physical
                              - mailing
                              - billing
                          street1:
                            type: string
                            maxLength: 255
                            description: Street address line 1
                          street2:
                            type: string
                            maxLength: 255
                            description: Street address line 2
                          city:
                            type: string
                            maxLength: 100
                            description: City
                          state:
                            type: string
                            maxLength: 50
                            description: State/Province
                          zip_code:
                            type: string
                            maxLength: 20
                            description: ZIP/Postal code
                          country:
                            type: string
                            maxLength: 3
                            default: US
                            description: Country code (ISO 3166-1 alpha-2 or alpha-3)
                          is_primary:
                            type: boolean
                            default: false
                            description: Whether this is the primary address
                      description: >-
                        Addresses to create (contact_ref links to contact
                        temp_id, null = org-level)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.completed
            title: Organization Bootstrap Completed
            summary: Organization bootstrap process successfully completed
            contentType: application/json
            payload:
              title: OrganizationBootstrapCompletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.completed
                event_data:
                  title: OrganizationBootstrapCompletionData
                  type: object
                  required:
                    - bootstrap_id
                    - organization_id
                    - admin_role_assigned
                    - permissions_granted
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                    organization_id:
                      type: string
                      format: uuid
                    admin_role_assigned:
                      allOf:
                        - type: string
                          title: AdminRole
                          enum:
                            - provider_admin
                            - partner_admin
                        - description: Role assigned to the initial administrator
                    permissions_granted:
                      type: integer
                      description: Number of permissions granted to the admin role
                    ltree_path:
                      type: string
                      description: Organization ltree path in hierarchy
                      examples:
                        - root.org_acme_healthcare
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.failed
            title: Organization Bootstrap Failed
            summary: Organization bootstrap process failed, triggering compensation
            contentType: application/json
            payload:
              title: OrganizationBootstrapFailedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.failed
                event_data:
                  title: OrganizationBootstrapFailureData
                  type: object
                  required:
                    - bootstrap_id
                    - failure_stage
                    - error_message
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                    failure_stage:
                      allOf:
                        - type: string
                          title: BootstrapFailureStage
                          enum:
                            - organization_creation
                            - dns_provisioning
                            - admin_user_creation
                            - role_assignment
                            - permission_grants
                            - invitation_email
                        - description: Stage where bootstrap process failed
                    error_message:
                      type: string
                      description: Error details for troubleshooting
                    partial_cleanup_required:
                      type: boolean
                      description: Whether partial resources need cleanup
                      default: false
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.bootstrap.cancelled
            title: Organization Bootstrap Cancelled
            summary: Organization bootstrap process cancelled and cleanup completed
            contentType: application/json
            payload:
              title: OrganizationBootstrapCancelledEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization
                event_type:
                  type: string
                  const: organization.bootstrap.cancelled
                event_data:
                  title: OrganizationBootstrapCancellationData
                  type: object
                  required:
                    - bootstrap_id
                    - cleanup_completed
                  properties:
                    bootstrap_id:
                      type: string
                      format: uuid
                    cleanup_completed:
                      type: boolean
                      description: >-
                        Whether all partial resources were successfully cleaned
                        up
                    cleanup_actions:
                      type: array
                      items:
                        type: string
                      description: List of cleanup actions performed
                      examples:
                        - removed_dns_records
                        - removed_partial_database_records
                        - deleted_pending_invitations
                    original_failure_stage:
                      type: string
                      description: Original stage where bootstrap failed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: program.created
            title: Program Created
            summary: >-
              A new program has been created within an organization during
              bootstrap
            contentType: application/json
            payload:
              title: ProgramCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization UUID that owns this program
                stream_type:
                  type: string
                  description: >-
                    Program events use organization as stream type during
                    bootstrap
                  const: organization
                event_type:
                  type: string
                  const: program.created
                event_data:
                  title: ProgramCreationData
                  type: object
                  required:
                    - program_id
                    - organization_id
                    - name
                  properties:
                    program_id:
                      type: string
                      format: uuid
                      description: Unique identifier for the program
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization that owns this program
                    name:
                      type: string
                      maxLength: 200
                      description: Human-readable program name
                      examples:
                        - Default Program
                        - Substance Abuse Recovery
                        - Mental Health Services
                    description:
                      type: string
                      maxLength: 1000
                      description: Description of the program and its services
                    is_default:
                      type: boolean
                      default: true
                      description: Whether this is the default program for the organization
                    settings:
                      type: object
                      description: Program-specific configuration settings
                      additionalProperties: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.created
            title: Organization Unit Created
            summary: >-
              A new organization unit has been created within a provider
              hierarchy
            contentType: application/json
            payload:
              title: OrganizationUnitCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization Unit UUID
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.created
                event_data:
                  title: OrganizationUnitCreationData
                  type: object
                  required:
                    - organization_id
                    - name
                    - slug
                    - path
                    - parent_path
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        UUID of the root organization (provider) this unit
                        belongs to
                    name:
                      type: string
                      maxLength: 200
                      description: Human-readable organization unit name
                      examples:
                        - Northern Region
                        - Oak Street Group Home
                        - Pediatrics Department
                    display_name:
                      type: string
                      maxLength: 200
                      description: Display name for UI (may differ from name)
                    slug:
                      type: string
                      maxLength: 100
                      pattern: ^[a-z0-9_]+$
                      description: >-
                        URL-friendly identifier (ltree-safe, underscores only
                        for PG15 compatibility)
                      examples:
                        - northern_region
                        - oak_street
                        - pediatrics
                    path:
                      type: string
                      description: Full ltree hierarchical path (nlevel > 2)
                      examples:
                        - root.org_acme_healthcare.northern_region
                        - root.org_acme_healthcare.northern_region.oak_street
                    parent_path:
                      type: string
                      description: Parent organization/unit ltree path
                      examples:
                        - root.org_acme_healthcare
                        - root.org_acme_healthcare.northern_region
                    timezone:
                      type: string
                      default: America/New_York
                      description: Organization unit timezone
                      examples:
                        - America/New_York
                        - America/Chicago
                        - America/Los_Angeles
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.updated
            title: Organization Unit Updated
            summary: Organization unit information has been updated
            contentType: application/json
            payload:
              title: OrganizationUnitUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Organization Unit UUID
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.updated
                event_data:
                  title: OrganizationUnitUpdateData
                  type: object
                  required:
                    - organization_unit_id
                    - updatable_fields
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                      description: UUID of the organization unit being updated
                    name:
                      type: string
                      maxLength: 200
                      description: Updated organization unit name (only present if changed)
                    display_name:
                      type: string
                      maxLength: 200
                      description: Updated display name (only present if changed)
                    timezone:
                      type: string
                      description: Updated timezone (only present if changed)
                    updatable_fields:
                      type: array
                      items:
                        type: string
                        title: OUUpdatableFields
                        enum:
                          - name
                          - display_name
                          - timezone
                        description: Fields that can be updated on an organization unit
                      description: >-
                        List of fields that can be updated on an organization
                        unit
                      examples:
                        - - name
                          - display_name
                        - - timezone
                    previous_values:
                      type: object
                      description: Previous values of updated fields (for audit trail)
                      additionalProperties: true
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.deactivated
            title: Organization Unit Deactivated
            summary: Organization unit has been frozen - no role assignments allowed
            contentType: application/json
            payload:
              title: OrganizationUnitDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.deactivated
                event_data:
                  title: OrganizationUnitDeactivationData
                  type: object
                  required:
                    - organization_unit_id
                    - path
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    path:
                      type: string
                      description: ltree path of deactivated unit
                      examples:
                        - root.org_acme_healthcare.northern_region
                    cascade_effect:
                      type: string
                      default: role_assignment_blocked
                      description: >
                        Effect of deactivation:

                        - role_assignment_blocked: New role assignments to this
                        OU and descendants are blocked
                      const: role_assignment_blocked
                    descendants_affected:
                      type: boolean
                      default: true
                      description: >-
                        Whether descendant OUs are also affected (always true
                        via cascade)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.reactivated
            title: Organization Unit Reactivated
            summary: >-
              Organization unit has been unfrozen - role assignments allowed
              again
            contentType: application/json
            payload:
              title: OrganizationUnitReactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.reactivated
                event_data:
                  title: OrganizationUnitReactivationData
                  type: object
                  required:
                    - organization_unit_id
                    - path
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    path:
                      type: string
                      description: ltree path of reactivated unit
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.deleted
            title: Organization Unit Deleted
            summary: >-
              Organization unit has been soft-deleted (requires zero role
              references)
            contentType: application/json
            payload:
              title: OrganizationUnitDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.deleted
                event_data:
                  title: OrganizationUnitDeletionData
                  type: object
                  required:
                    - organization_unit_id
                    - deleted_path
                    - had_role_references
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    deleted_path:
                      type: string
                      description: ltree path being soft-deleted
                      examples:
                        - root.org_acme_healthcare.northern_region.oak_street
                    had_role_references:
                      type: boolean
                      description: >-
                        Whether any role references existed (must be false to
                        delete)
                      default: false
                    deletion_type:
                      type: string
                      default: soft_delete
                      description: Always soft_delete (sets deleted_at timestamp)
                      const: soft_delete
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization_unit.moved
            title: Organization Unit Moved
            summary: >-
              Organization unit has been reparented to a different parent
              (future capability)
            contentType: application/json
            payload:
              title: OrganizationUnitMovedEvent
              type: object
              description: >-
                Future capability - organization unit reparented to different
                parent
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                stream_type:
                  type: string
                  const: organization_unit
                event_type:
                  type: string
                  const: organization_unit.moved
                event_data:
                  title: OrganizationUnitMoveData
                  type: object
                  required:
                    - organization_unit_id
                    - old_path
                    - new_path
                    - old_parent_path
                    - new_parent_path
                  properties:
                    organization_unit_id:
                      type: string
                      format: uuid
                    old_path:
                      type: string
                      description: Previous ltree path
                      examples:
                        - root.org_acme_healthcare.northern_region.oak_street
                    new_path:
                      type: string
                      description: New ltree path after move
                      examples:
                        - root.org_acme_healthcare.southern_region.oak_street
                    old_parent_path:
                      type: string
                      description: Previous parent ltree path
                    new_parent_path:
                      type: string
                      description: New parent ltree path
                    descendants_moved:
                      type: integer
                      description: Number of descendant OUs that had their paths updated
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.failed_events_viewed
            title: Failed Events Viewed
            summary: Platform admin viewed failed domain events for observability
            contentType: application/json
            payload:
              title: PlatformAdminFailedEventsViewedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Platform admin user ID who viewed the events
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.failed_events_viewed
                event_data:
                  title: PlatformAdminFailedEventsViewedData
                  type: object
                  required:
                    - filters
                  properties:
                    filters:
                      title: FailedEventsViewedFilters
                      type: object
                      description: Filters applied when viewing failed events
                      properties:
                        limit:
                          type: integer
                          description: Maximum number of events returned
                          default: 25
                        offset:
                          type: integer
                          description: Pagination offset
                          default: 0
                        event_type:
                          type: string
                          nullable: true
                          description: Filter by specific event type
                        stream_type:
                          type: string
                          nullable: true
                          description: Filter by specific stream type
                        since:
                          type: string
                          format: date-time
                          nullable: true
                          description: Filter events created after this timestamp
                        include_dismissed:
                          type: boolean
                          description: Whether to include dismissed events
                          default: false
                        sort_by:
                          default: created_at
                          allOf:
                            - type: string
                              title: SortBy
                              enum:
                                - created_at
                                - event_type
                            - description: Column to sort by
                        sort_order:
                          default: desc
                          allOf:
                            - type: string
                              title: SortOrder
                              enum:
                                - asc
                                - desc
                            - description: Sort direction
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.event_retry_attempted
            title: Event Retry Attempted
            summary: Platform admin attempted to retry a failed event
            contentType: application/json
            payload:
              title: PlatformAdminEventRetryAttemptedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Platform admin user ID who attempted the retry
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.event_retry_attempted
                event_data:
                  title: PlatformAdminEventRetryAttemptedData
                  type: object
                  required:
                    - target_event_id
                    - target_event_type
                    - target_stream_type
                    - target_stream_id
                    - retry_success
                  properties:
                    target_event_id:
                      type: string
                      format: uuid
                      description: ID of the event that was retried
                    target_event_type:
                      type: string
                      description: Type of the event that was retried
                    target_stream_type:
                      type: string
                      description: Stream type of the event that was retried
                    target_stream_id:
                      type: string
                      format: uuid
                      description: Stream ID of the event that was retried
                    original_error:
                      type: string
                      description: The error message before retry attempt
                    retry_success:
                      type: boolean
                      description: Whether the retry succeeded
                    new_error:
                      type: string
                      nullable: true
                      description: Error message after retry (null if successful)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.processing_stats_viewed
            title: Processing Stats Viewed
            summary: Platform admin viewed event processing statistics
            contentType: application/json
            payload:
              title: PlatformAdminProcessingStatsViewedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Platform admin user ID who viewed the stats
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.processing_stats_viewed
                event_data:
                  title: PlatformAdminProcessingStatsViewedData
                  type: object
                  required:
                    - timestamp
                  properties:
                    timestamp:
                      type: string
                      format: date-time
                      description: When the stats were viewed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.event_dismissed
            title: Event Dismissed
            summary: Platform admin dismissed a failed event
            contentType: application/json
            payload:
              title: PlatformAdminEventDismissedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Unique ID for this audit event (gen_random_uuid)
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.event_dismissed
                event_data:
                  title: PlatformAdminEventDismissedData
                  type: object
                  required:
                    - target_event_id
                    - target_event_type
                    - target_stream_type
                    - target_stream_id
                  properties:
                    target_event_id:
                      type: string
                      format: uuid
                      description: ID of the event that was dismissed
                    target_event_type:
                      type: string
                      description: Type of the event that was dismissed
                    target_stream_type:
                      type: string
                      description: Stream type of the event that was dismissed
                    target_stream_id:
                      type: string
                      format: uuid
                      description: Stream ID of the event that was dismissed
                    reason:
                      type: string
                      nullable: true
                      description: Optional reason provided for dismissing the event
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: platform.admin.event_undismissed
            title: Event Undismissed
            summary: Platform admin reversed dismissal of a failed event
            contentType: application/json
            payload:
              title: PlatformAdminEventUndismissedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Unique ID for this audit event (gen_random_uuid)
                stream_type:
                  type: string
                  const: platform_admin
                event_type:
                  type: string
                  const: platform.admin.event_undismissed
                event_data:
                  title: PlatformAdminEventUndismissedData
                  type: object
                  required:
                    - target_event_id
                    - target_event_type
                    - target_stream_type
                    - target_stream_id
                  properties:
                    target_event_id:
                      type: string
                      format: uuid
                      description: ID of the event that was undismissed
                    target_event_type:
                      type: string
                      description: Type of the event that was undismissed
                    target_stream_type:
                      type: string
                      description: Stream type of the event that was undismissed
                    target_stream_id:
                      type: string
                      format: uuid
                      description: Stream ID of the event that was undismissed
                    previous_dismissed_by:
                      type: string
                      format: uuid
                      description: User ID who originally dismissed the event
                    previous_dismiss_reason:
                      type: string
                      nullable: true
                      description: Reason that was given when event was dismissed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: email.created
            title: Email Created
            summary: A new email address has been created for an organization
            contentType: application/json
            payload:
              title: EmailCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Email UUID
                stream_type:
                  type: string
                  const: email
                event_type:
                  type: string
                  const: email.created
                event_data:
                  title: EmailCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - address
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined email label for identification
                      examples:
                        - Main Office
                        - Billing Department
                        - Support Inbox
                        - Emergency Contact
                    type:
                      allOf:
                        - type: string
                          title: EmailType
                          enum:
                            - work
                            - personal
                            - billing
                            - support
                            - main
                        - description: |
                            Structured email type:
                            - work: Business/work email address
                            - personal: Personal email address
                            - billing: Billing and invoicing email
                            - support: Support and helpdesk email
                            - main: Primary organizational email
                    address:
                      type: string
                      format: email
                      maxLength: 255
                      description: Email address
                      examples:
                        - info@acme-healthcare.com
                        - billing@acme-healthcare.com
                        - support@acme-healthcare.com
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary email for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Email active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: email.updated
            title: Email Updated
            summary: Email address information has been updated
            contentType: application/json
            payload:
              title: EmailUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Email UUID
                stream_type:
                  type: string
                  const: email
                event_type:
                  type: string
                  const: email.updated
                event_data:
                  title: EmailUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated email label
                    type:
                      allOf:
                        - type: string
                          title: EmailType
                          enum:
                            - work
                            - personal
                            - billing
                            - support
                            - main
                        - description: Updated email type
                    address:
                      type: string
                      format: email
                      maxLength: 255
                      description: Updated email address
                    is_primary:
                      type: boolean
                      description: Updated primary email flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: email.deleted
            title: Email Deleted
            summary: Email address has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: EmailDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Email UUID being deleted
                stream_type:
                  type: string
                  const: email
                event_type:
                  type: string
                  const: email.deleted
                event_data:
                  title: EmailDeletionData
                  type: object
                  required:
                    - email_id
                    - organization_id
                  properties:
                    email_id:
                      type: string
                      format: uuid
                      description: UUID of email being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this email
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Email address no longer in use
                        - Duplicate email removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.created
            title: Contact Created
            summary: A new contact has been created for an organization
            contentType: application/json
            payload:
              title: ContactCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.created
                event_data:
                  title: ContactCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - first_name
                    - last_name
                    - email
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined contact label for identification
                      examples:
                        - John Smith - Billing Contact
                        - Emergency Contact - Jane Doe
                        - Technical Lead - Bob Johnson
                    type:
                      allOf:
                        - type: string
                          title: ContactType
                          enum:
                            - administrative
                            - billing
                            - technical
                            - emergency
                            - stakeholder
                        - description: |
                            Structured contact type:
                            - administrative: Administrative/platform contact
                            - billing: Billing and invoicing contact
                            - technical: Technical support contact
                            - emergency: Emergency contact person
                            - stakeholder: General stakeholder contact
                    first_name:
                      type: string
                      maxLength: 100
                      description: Contact first name
                    last_name:
                      type: string
                      maxLength: 100
                      description: Contact last name
                    email:
                      type: string
                      format: email
                      maxLength: 255
                      description: Contact email address
                    phone:
                      type: string
                      maxLength: 20
                      description: >-
                        Optional phone number (deprecated - use
                        phones_projection table for structured phone data)
                    title:
                      type: string
                      maxLength: 100
                      description: Job title (e.g., 'Chief Financial Officer')
                    department:
                      type: string
                      maxLength: 100
                      description: Department (e.g., 'Finance', 'IT')
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary contact for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Contact active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.updated
            title: Contact Updated
            summary: Contact information has been updated
            contentType: application/json
            payload:
              title: ContactUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.updated
                event_data:
                  title: ContactUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated contact label
                    type:
                      allOf:
                        - type: string
                          title: ContactType
                          enum:
                            - administrative
                            - billing
                            - technical
                            - emergency
                            - stakeholder
                        - description: Updated contact type
                    first_name:
                      type: string
                      maxLength: 100
                      description: Updated first name
                    last_name:
                      type: string
                      maxLength: 100
                      description: Updated last name
                    email:
                      type: string
                      format: email
                      maxLength: 255
                      description: Updated email address
                    phone:
                      type: string
                      maxLength: 20
                      description: >-
                        Updated phone number (deprecated - use
                        phones_projection)
                    title:
                      type: string
                      maxLength: 100
                      description: Updated job title
                    department:
                      type: string
                      maxLength: 100
                      description: Updated department
                    is_primary:
                      type: boolean
                      description: Updated primary contact flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.deleted
            title: Contact Deleted
            summary: Contact has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: ContactDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID being deleted
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.deleted
                event_data:
                  title: ContactDeletionData
                  type: object
                  required:
                    - contact_id
                    - organization_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: UUID of contact being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this contact
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Contact no longer with organization
                        - Duplicate contact removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.user.linked
            title: Contact User Linked
            summary: >-
              Contact has been linked to a user (same person is both contact and
              user)
            contentType: application/json
            payload:
              title: ContactUserLinkedEvent
              type: object
              description: Emitted when a contact is linked to a user (same person is both)
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.user.linked
                event_data:
                  title: ContactUserLinkData
                  type: object
                  description: Data for linking a contact to a user
                  required:
                    - contact_id
                    - user_id
                    - organization_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact being linked
                    user_id:
                      type: string
                      format: uuid
                      description: User being linked to contact
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization context for this link
                    linked_reason:
                      type: string
                      description: >-
                        Reason for linking (invitation acceptance, manual link,
                        etc.)
                      examples:
                        - invitation_accepted
                        - manual_link
                        - bootstrap_auto_link
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.user.unlinked
            title: Contact User Unlinked
            summary: Contact has been unlinked from a user
            contentType: application/json
            payload:
              title: ContactUserUnlinkedEvent
              type: object
              description: Emitted when a contact is unlinked from a user
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Contact UUID
                stream_type:
                  type: string
                  const: contact
                event_type:
                  type: string
                  const: contact.user.unlinked
                event_data:
                  title: ContactUserUnlinkData
                  type: object
                  description: Data for unlinking a contact from a user
                  required:
                    - contact_id
                    - user_id
                    - organization_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact being unlinked
                    user_id:
                      type: string
                      format: uuid
                      description: User being unlinked from contact
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization context for this unlink
                    unlinked_reason:
                      type: string
                      description: Reason for unlinking
                      examples:
                        - user_deleted
                        - manual_unlink
                        - duplicate_resolution
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.created
            title: Phone Created
            summary: A new phone number has been created for an organization
            contentType: application/json
            payload:
              title: PhoneCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Phone UUID
                stream_type:
                  type: string
                  const: phone
                event_type:
                  type: string
                  const: phone.created
                event_data:
                  title: PhoneCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - number
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined phone label for identification
                      examples:
                        - Main Office
                        - Emergency Hotline
                        - After Hours - On Call
                        - Billing Department
                    type:
                      allOf:
                        - type: string
                          title: PhoneType
                          enum:
                            - mobile
                            - office
                            - fax
                            - emergency
                        - description: |
                            Structured phone type:
                            - mobile: Mobile/cell phone number
                            - office: Office landline number
                            - fax: Fax number
                            - emergency: Emergency contact number
                    number:
                      type: string
                      maxLength: 20
                      description: Phone number (formatted or raw)
                      examples:
                        - +1-555-123-4567
                        - '5551234567'
                        - +1 (555) 123-4567
                        - 555-123-4567
                    extension:
                      type: string
                      maxLength: 10
                      description: Optional phone extension
                      examples:
                        - x1234
                        - '1234'
                        - ext. 5678
                    country_code:
                      type: string
                      maxLength: 5
                      default: '+1'
                      description: Country calling code
                      examples:
                        - '+1'
                        - '+44'
                        - '+33'
                        - '+49'
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary phone for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Phone active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.updated
            title: Phone Updated
            summary: Phone number information has been updated
            contentType: application/json
            payload:
              title: PhoneUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Phone UUID
                stream_type:
                  type: string
                  const: phone
                event_type:
                  type: string
                  const: phone.updated
                event_data:
                  title: PhoneUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated phone label
                    type:
                      allOf:
                        - type: string
                          title: PhoneType
                          enum:
                            - mobile
                            - office
                            - fax
                            - emergency
                        - description: Updated phone type
                    number:
                      type: string
                      maxLength: 20
                      description: Updated phone number
                    extension:
                      type: string
                      maxLength: 10
                      description: Updated phone extension
                    country_code:
                      type: string
                      maxLength: 5
                      description: Updated country calling code
                    is_primary:
                      type: boolean
                      description: Updated primary phone flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.deleted
            title: Phone Deleted
            summary: Phone number has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: PhoneDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Phone UUID being deleted
                stream_type:
                  type: string
                  const: phone
                event_type:
                  type: string
                  const: phone.deleted
                event_data:
                  title: PhoneDeletionData
                  type: object
                  required:
                    - phone_id
                    - organization_id
                  properties:
                    phone_id:
                      type: string
                      format: uuid
                      description: UUID of phone being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this phone
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Phone number no longer in use
                        - Duplicate phone removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: address.created
            title: Address Created
            summary: A new address has been created for an organization
            contentType: application/json
            payload:
              title: AddressCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Address UUID
                stream_type:
                  type: string
                  const: address
                event_type:
                  type: string
                  const: address.created
                event_data:
                  title: AddressCreationData
                  type: object
                  required:
                    - organization_id
                    - label
                    - type
                    - street1
                    - city
                    - state
                    - zip_code
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Owning organization UUID
                    label:
                      type: string
                      maxLength: 200
                      description: User-defined address label for identification
                      examples:
                        - Main Office
                        - Billing Department
                        - Satellite Location - North Campus
                    type:
                      allOf:
                        - type: string
                          title: AddressType
                          enum:
                            - physical
                            - mailing
                            - billing
                        - description: >
                            Structured address type:

                            - physical: Business location (where services are
                            delivered)

                            - mailing: Mailing address (for correspondence)

                            - billing: Billing address (for invoices and
                            payments)
                    street1:
                      type: string
                      maxLength: 255
                      description: Address line 1 (street number and name)
                      examples:
                        - 123 Main Street
                        - 456 Healthcare Plaza, Suite 200
                    street2:
                      type: string
                      maxLength: 255
                      description: Optional address line 2 (apartment, suite, unit)
                      examples:
                        - Suite 200
                        - Building B
                        - Unit 5
                    city:
                      type: string
                      maxLength: 100
                      description: City or locality
                      examples:
                        - San Francisco
                        - New York
                        - Toronto
                    state:
                      type: string
                      maxLength: 50
                      description: State, province, or region code
                      examples:
                        - CA
                        - NY
                        - 'ON'
                        - BC
                    zip_code:
                      type: string
                      maxLength: 20
                      description: Postal code or ZIP code
                      examples:
                        - '94102'
                        - '10001'
                        - M5H 2N2
                    country:
                      type: string
                      maxLength: 3
                      default: US
                      description: ISO country code (ISO 3166-1 alpha-2)
                      examples:
                        - US
                        - CA
                        - GB
                    is_primary:
                      type: boolean
                      default: false
                      description: >-
                        Whether this is the primary address for the organization
                        (only one per org)
                    is_active:
                      type: boolean
                      default: true
                      description: Address active status
                    metadata:
                      type: object
                      description: Additional flexible data storage
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: address.updated
            title: Address Updated
            summary: Address information has been updated
            contentType: application/json
            payload:
              title: AddressUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Address UUID
                stream_type:
                  type: string
                  const: address
                event_type:
                  type: string
                  const: address.updated
                event_data:
                  title: AddressUpdateData
                  type: object
                  description: Partial update data (only fields being updated)
                  properties:
                    label:
                      type: string
                      maxLength: 200
                      description: Updated address label
                    type:
                      allOf:
                        - type: string
                          title: AddressType
                          enum:
                            - physical
                            - mailing
                            - billing
                        - description: Updated address type
                    street1:
                      type: string
                      maxLength: 255
                      description: Updated address line 1
                    street2:
                      type: string
                      maxLength: 255
                      description: Updated address line 2
                    city:
                      type: string
                      maxLength: 100
                      description: Updated city
                    state:
                      type: string
                      maxLength: 50
                      description: Updated state/province
                    zip_code:
                      type: string
                      maxLength: 20
                      description: Updated postal code
                    country:
                      type: string
                      maxLength: 3
                      description: Updated country code
                    is_primary:
                      type: boolean
                      description: Updated primary address flag
                    is_active:
                      type: boolean
                      description: Updated active status
                    metadata:
                      type: object
                      description: Updated metadata (merges with existing)
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: address.deleted
            title: Address Deleted
            summary: Address has been logically deleted (soft delete)
            contentType: application/json
            payload:
              title: AddressDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Address UUID being deleted
                stream_type:
                  type: string
                  const: address
                event_type:
                  type: string
                  const: address.deleted
                event_data:
                  title: AddressDeletionData
                  type: object
                  required:
                    - address_id
                    - organization_id
                  properties:
                    address_id:
                      type: string
                      format: uuid
                      description: UUID of address being deleted
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization owning this address
                    reason:
                      type: string
                      description: Optional deletion reason
                      examples:
                        - Address no longer in use
                        - Duplicate address removed
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.contact.linked
            title: Organization-Contact Linked
            summary: A contact has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationContactLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.contact.linked
                event_data:
                  title: OrganizationContactLinkData
                  type: object
                  required:
                    - organization_id
                    - contact_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                      examples:
                        - Primary contact assignment
                        - Multi-organization contact relationship
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.contact.unlinked
            title: Organization-Contact Unlinked
            summary: A contact has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationContactUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.contact.unlinked
                event_data:
                  title: OrganizationContactUnlinkData
                  type: object
                  required:
                    - organization_id
                    - contact_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                      examples:
                        - Contact no longer associated with organization
                        - Organization cascade deletion
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.address.linked
            title: Organization-Address Linked
            summary: An address has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationAddressLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.address.linked
                event_data:
                  title: OrganizationAddressLinkData
                  type: object
                  required:
                    - organization_id
                    - address_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.address.unlinked
            title: Organization-Address Unlinked
            summary: An address has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationAddressUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.address.unlinked
                event_data:
                  title: OrganizationAddressUnlinkData
                  type: object
                  required:
                    - organization_id
                    - address_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.phone.linked
            title: Organization-Phone Linked
            summary: A phone number has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationPhoneLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.phone.linked
                event_data:
                  title: OrganizationPhoneLinkData
                  type: object
                  required:
                    - organization_id
                    - phone_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.phone.unlinked
            title: Organization-Phone Unlinked
            summary: A phone number has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationPhoneUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.phone.unlinked
                event_data:
                  title: OrganizationPhoneUnlinkData
                  type: object
                  required:
                    - organization_id
                    - phone_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.email.linked
            title: Organization-Email Linked
            summary: An email address has been linked to an organization
            contentType: application/json
            payload:
              title: OrganizationEmailLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.email.linked
                event_data:
                  title: OrganizationEmailLinkData
                  type: object
                  required:
                    - organization_id
                    - email_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: organization.email.unlinked
            title: Organization-Email Unlinked
            summary: An email address has been unlinked from an organization
            contentType: application/json
            payload:
              title: OrganizationEmailUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (organization_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: organization.email.unlinked
                event_data:
                  title: OrganizationEmailUnlinkData
                  type: object
                  required:
                    - organization_id
                    - email_id
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: Organization UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.phone.linked
            title: Contact-Phone Linked
            summary: A phone number has been linked to a contact
            contentType: application/json
            payload:
              title: ContactPhoneLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.phone.linked
                event_data:
                  title: ContactPhoneLinkData
                  type: object
                  required:
                    - contact_id
                    - phone_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.phone.unlinked
            title: Contact-Phone Unlinked
            summary: A phone number has been unlinked from a contact
            contentType: application/json
            payload:
              title: ContactPhoneUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.phone.unlinked
                event_data:
                  title: ContactPhoneUnlinkData
                  type: object
                  required:
                    - contact_id
                    - phone_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.address.linked
            title: Contact-Address Linked
            summary: An address has been linked to a contact
            contentType: application/json
            payload:
              title: ContactAddressLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.address.linked
                event_data:
                  title: ContactAddressLinkData
                  type: object
                  required:
                    - contact_id
                    - address_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.address.unlinked
            title: Contact-Address Unlinked
            summary: An address has been unlinked from a contact
            contentType: application/json
            payload:
              title: ContactAddressUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.address.unlinked
                event_data:
                  title: ContactAddressUnlinkData
                  type: object
                  required:
                    - contact_id
                    - address_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.email.linked
            title: Contact-Email Linked
            summary: An email address has been linked to a contact
            contentType: application/json
            payload:
              title: ContactEmailLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.email.linked
                event_data:
                  title: ContactEmailLinkData
                  type: object
                  required:
                    - contact_id
                    - email_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being linked
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: contact.email.unlinked
            title: Contact-Email Unlinked
            summary: An email address has been unlinked from a contact
            contentType: application/json
            payload:
              title: ContactEmailUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (contact_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: contact.email.unlinked
                event_data:
                  title: ContactEmailUnlinkData
                  type: object
                  required:
                    - contact_id
                    - email_id
                  properties:
                    contact_id:
                      type: string
                      format: uuid
                      description: Contact UUID
                    email_id:
                      type: string
                      format: uuid
                      description: Email UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.address.linked
            title: Phone-Address Linked
            summary: >-
              An address has been linked to a phone number (e.g., location of
              phone)
            contentType: application/json
            payload:
              title: PhoneAddressLinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (phone_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: phone.address.linked
                event_data:
                  title: PhoneAddressLinkData
                  type: object
                  required:
                    - phone_id
                    - address_id
                  properties:
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being linked (e.g., location of phone)
                    reason:
                      type: string
                      description: Optional reason for linking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: phone.address.unlinked
            title: Phone-Address Unlinked
            summary: An address has been unlinked from a phone number
            contentType: application/json
            payload:
              title: PhoneAddressUnlinkedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Junction UUID (phone_id)
                stream_type:
                  type: string
                  const: junction
                event_type:
                  type: string
                  const: phone.address.unlinked
                event_data:
                  title: PhoneAddressUnlinkData
                  type: object
                  required:
                    - phone_id
                    - address_id
                  properties:
                    phone_id:
                      type: string
                      format: uuid
                      description: Phone UUID
                    address_id:
                      type: string
                      format: uuid
                      description: Address UUID being unlinked
                    reason:
                      type: string
                      description: Optional reason for unlinking
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: permission.defined
            title: Permission Defined
            summary: A new permission has been created in the system
            contentType: application/json
            payload:
              title: PermissionDefinedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Permission UUID
                stream_type:
                  type: string
                  const: permission
                event_type:
                  type: string
                  const: permission.defined
                event_data:
                  title: PermissionDefinedData
                  type: object
                  required:
                    - applet
                    - action
                    - description
                    - scope_type
                    - requires_mfa
                  properties:
                    applet:
                      type: string
                      description: Functional module (medication, provider, client, etc.)
                      examples:
                        - medication
                        - provider
                        - client
                        - user
                    action:
                      type: string
                      description: Specific capability within the applet
                      examples:
                        - create
                        - view
                        - update
                        - delete
                        - approve
                        - impersonate
                    description:
                      type: string
                      description: Human-readable explanation of the permission
                      examples:
                        - Create new medication prescriptions
                        - View client records
                        - Impersonate users for support operations
                    scope_type:
                      type: string
                      title: ScopeType
                      enum:
                        - global
                        - org
                      description: >-
                        Permission scope type (global for platform-wide, org for
                        organization-scoped)
                    requires_mfa:
                      type: boolean
                      description: Whether MFA is required to use this permission
                      default: false
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.created
            title: Role Created
            summary: A new role has been created
            contentType: application/json
            payload:
              title: RoleCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.created
                event_data:
                  title: RoleCreatedData
                  type: object
                  required:
                    - name
                    - description
                  properties:
                    name:
                      type: string
                      description: Role identifier
                      examples:
                        - super_admin
                        - provider_admin
                        - facility_admin
                        - clinician
                    description:
                      type: string
                      description: Human-readable role description
                      examples:
                        - Platform-wide administrator with all permissions
                        - Organization administrator with org-scoped permissions
                    zitadel_org_id:
                      type: string
                      nullable: true
                      description: Zitadel organization ID (NULL for super_admin)
                    org_hierarchy_scope:
                      type: string
                      nullable: true
                      description: >-
                        ltree path for hierarchical scoping (NULL for
                        super_admin)
                      examples:
                        - org_acme_healthcare_001
                        - org_acme_healthcare_001.facility_456
                    display_name:
                      type: string
                      nullable: true
                      description: Human-readable display name for the role
                      examples:
                        - Provider Administrator
                        - Facility Manager
                        - Clinician
                    organization_id:
                      type: string
                      format: uuid
                      nullable: true
                      description: >-
                        Organization UUID for org-scoped roles (NULL for
                        super_admin)
                    scope:
                      type: string
                      title: RoleScope
                      description: >-
                        Scope level of a role (global for super_admin,
                        organization/unit for org-scoped)
                      enum:
                        - global
                        - organization
                        - unit
                    is_system_role:
                      type: boolean
                      nullable: true
                      description: Whether this is a system-defined role (not user-created)
                      default: false
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.permission.granted
            title: Role Permission Granted
            summary: A permission has been granted to a role
            contentType: application/json
            payload:
              title: RolePermissionGrantedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.permission.granted
                event_data:
                  title: RolePermissionGrantedData
                  type: object
                  required:
                    - permission_id
                    - permission_name
                  properties:
                    permission_id:
                      type: string
                      format: uuid
                      description: UUID of the permission being granted
                    permission_name:
                      type: string
                      description: Full permission identifier (for logging)
                      pattern: ^[a-z_]+\.[a-z_]+$
                      examples:
                        - medication.create
                        - provider.impersonate
                        - client.view
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.permission.revoked
            title: Role Permission Revoked
            summary: A permission has been revoked from a role
            contentType: application/json
            payload:
              title: RolePermissionRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.permission.revoked
                event_data:
                  title: RolePermissionRevokedData
                  type: object
                  required:
                    - permission_id
                    - permission_name
                    - revocation_reason
                  properties:
                    permission_id:
                      type: string
                      format: uuid
                    permission_name:
                      type: string
                      pattern: ^[a-z_]+\.[a-z_]+$
                    revocation_reason:
                      type: string
                      description: Explanation for permission removal
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.updated
            title: Role Updated
            summary: A role's name or description has been updated
            contentType: application/json
            payload:
              title: RoleUpdatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.updated
                event_data:
                  title: RoleUpdatedData
                  type: object
                  properties:
                    name:
                      type: string
                      description: Updated role name (if changed)
                      examples:
                        - provider_admin
                        - facility_admin
                        - custom_clinician
                    description:
                      type: string
                      description: Updated role description (if changed)
                      examples:
                        - Organization administrator with org-scoped permissions
                        - Facility-specific administrative role
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.deactivated
            title: Role Deactivated
            summary: A role has been deactivated (frozen)
            contentType: application/json
            payload:
              title: RoleDeactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.deactivated
                event_data:
                  title: RoleDeactivatedData
                  type: object
                  required:
                    - reason
                  properties:
                    reason:
                      type: string
                      description: Reason for deactivation
                      examples:
                        - >-
                          Role no longer needed for current organizational
                          structure
                        - Temporarily freezing role for security review
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.reactivated
            title: Role Reactivated
            summary: A role has been reactivated
            contentType: application/json
            payload:
              title: RoleReactivatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.reactivated
                event_data:
                  title: RoleReactivatedData
                  type: object
                  properties:
                    reason:
                      type: string
                      description: Reason for reactivation
                      examples:
                        - Security review completed, role reinstated
                        - Role needed again for new hire onboarding
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: role.deleted
            title: Role Deleted
            summary: A role has been soft-deleted
            contentType: application/json
            payload:
              title: RoleDeletedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Role UUID
                stream_type:
                  type: string
                  const: role
                event_type:
                  type: string
                  const: role.deleted
                event_data:
                  title: RoleDeletedData
                  type: object
                  required:
                    - reason
                  properties:
                    reason:
                      type: string
                      description: Reason for deletion
                      examples:
                        - Role permanently removed after deprecation period
                        - Custom role no longer needed
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.role.assigned
            title: User Role Assigned
            summary: A role has been assigned to a user
            contentType: application/json
            payload:
              title: UserRoleAssignedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.role.assigned
                event_data:
                  title: UserRoleAssignedData
                  type: object
                  required:
                    - role_id
                    - role_name
                    - org_id
                    - scope_path
                    - assigned_by
                  properties:
                    role_id:
                      type: string
                      format: uuid
                      description: UUID of the role being assigned
                    role_name:
                      type: string
                      description: Role identifier for logging
                      examples:
                        - super_admin
                        - provider_admin
                    org_id:
                      type: string
                      description: >-
                        Organization ID ('*' for super_admin, specific org for
                        others)
                      examples:
                        - '*'
                        - acme_healthcare_001
                    scope_path:
                      type: string
                      description: >-
                        ltree hierarchy path ('*' for global, specific path for
                        scoped)
                      examples:
                        - '*'
                        - org_acme_healthcare_001
                        - org_acme_healthcare_001.facility_456
                    assigned_by:
                      type: string
                      format: uuid
                      description: User who performed the assignment
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: user.role.revoked
            title: User Role Revoked
            summary: A role has been revoked from a user
            contentType: application/json
            payload:
              title: UserRoleRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: User UUID
                stream_type:
                  type: string
                  const: user
                event_type:
                  type: string
                  const: user.role.revoked
                event_data:
                  title: UserRoleRevokedData
                  type: object
                  required:
                    - role_id
                    - role_name
                    - org_id
                    - revoked_by
                  properties:
                    role_id:
                      type: string
                      format: uuid
                    role_name:
                      type: string
                    org_id:
                      type: string
                    revoked_by:
                      type: string
                      format: uuid
                      description: User who performed the revocation
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: access_grant.created
            title: Access Grant Created
            summary: A cross-tenant access grant has been created
            contentType: application/json
            payload:
              title: AccessGrantCreatedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Access grant UUID
                stream_type:
                  type: string
                  const: access_grant
                event_type:
                  type: string
                  const: access_grant.created
                event_data:
                  title: AccessGrantCreatedData
                  type: object
                  required:
                    - consultant_org_id
                    - provider_org_id
                    - scope
                    - authorization_type
                  properties:
                    consultant_org_id:
                      type: string
                      description: Provider Partner organization ID
                    consultant_user_id:
                      type: string
                      format: uuid
                      nullable: true
                      description: Specific user (NULL for org-wide grant)
                    provider_org_id:
                      type: string
                      description: Target Provider organization ID
                    scope:
                      type: string
                      title: GrantScope
                      enum:
                        - organization_unit
                        - client_specific
                      description: >-
                        Scope of data access granted (organization_unit uses
                        scope_id for OU hierarchy)
                    scope_id:
                      type: string
                      format: uuid
                      nullable: true
                      description: Specific resource ID if scoped
                    authorization_type:
                      type: string
                      title: GrantAuthorizationType
                      enum:
                        - var_contract
                        - court_order
                        - family_participation
                        - social_services_assignment
                        - emergency_access
                      description: Legal/business basis for granting cross-tenant access
                    legal_reference:
                      type: string
                      nullable: true
                      description: Court order number, consent form ID, contract reference
                      examples:
                        - Court Order
                        - Parental Consent Form
                        - VAR Contract
                    expires_at:
                      type: string
                      format: date-time
                      nullable: true
                      description: Expiration timestamp for time-limited access
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
          - name: access_grant.revoked
            title: Access Grant Revoked
            summary: A cross-tenant access grant has been revoked
            contentType: application/json
            payload:
              title: AccessGrantRevokedEvent
              type: object
              required:
                - stream_id
                - stream_type
                - event_type
                - event_data
                - event_metadata
              properties:
                stream_id:
                  type: string
                  format: uuid
                  description: Access grant UUID
                stream_type:
                  type: string
                  const: access_grant
                event_type:
                  type: string
                  const: access_grant.revoked
                event_data:
                  title: AccessGrantRevokedData
                  type: object
                  required:
                    - grant_id
                    - revoked_by
                    - revocation_reason
                  properties:
                    grant_id:
                      type: string
                      format: uuid
                      description: UUID of the grant being revoked
                    revoked_by:
                      type: string
                      format: uuid
                      description: User who revoked the grant
                    revocation_reason:
                      type: string
                      description: Explanation for revocation
                      examples:
                        - Court case closed, access no longer required
                        - VAR contract terminated
                        - Parental custody changed, consent withdrawn
                event_metadata:
                  title: EventMetadata
                  type: object
                  required:
                    - user_id
                    - reason
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: ID of the user who initiated this event
                    organization_id:
                      type: string
                      format: uuid
                      description: >-
                        ID of the organization context for this event
                        (multi-tenant isolation)
                    reason:
                      type: string
                      minLength: 10
                      maxLength: 500
                      description: >
                        Business justification for this action. This field
                        captures the "WHY"

                        behind every change and is REQUIRED for all events.
                      examples:
                        - >-
                          Patient showed allergic reaction to previous
                          medication
                        - >-
                          Dosage adjustment per physician consultation on
                          2024-01-15
                        - >-
                          Regular intake from emergency department referral
                          #12345
                    user_email:
                      type: string
                      format: email
                      description: Email of the user who initiated this event
                    user_name:
                      type: string
                      description: Name of the user who initiated this event
                    correlation_id:
                      type: string
                      format: uuid
                      description: ID to correlate related events across the system
                    causation_id:
                      type: string
                      format: uuid
                      description: ID of the event that caused this event
                    ip_address:
                      type: string
                      format: ipv4
                      description: IP address of the client
                    user_agent:
                      type: string
                      description: User agent string of the client
                    notes:
                      type: string
                      maxLength: 2000
                      description: Additional context or notes
components:
  schemas:
    DomainEvent:
      type: object
      required:
        - id
        - stream_id
        - stream_type
        - stream_version
        - event_type
        - event_data
        - event_metadata
        - created_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique event identifier
        stream_id:
          type: string
          format: uuid
          description: The entity/aggregate this event belongs to
        stream_type:
          type: string
          enum:
            - user
            - organization
            - organization_unit
            - invitation
            - program
            - platform_admin
            - impersonation
            - role
            - permission
            - contact
            - address
            - phone
            - email
            - access_grant
            - junction
          description: Type of entity this event affects
        stream_version:
          type: integer
          minimum: 1
          description: Version number within this stream
        event_type:
          type: string
          pattern: ^[a-z_]+\.[a-z_]+$
          description: Event type in format domain.action
          examples:
            - user.synced_from_auth
            - organization.bootstrap_initiated
        event_data:
          type: object
          description: The actual event payload
        event_metadata:
          title: EventMetadata
          type: object
          required:
            - user_id
            - reason
          properties:
            user_id:
              type: string
              format: uuid
              description: ID of the user who initiated this event
            organization_id:
              type: string
              format: uuid
              description: >-
                ID of the organization context for this event (multi-tenant
                isolation)
            reason:
              type: string
              minLength: 10
              maxLength: 500
              description: >
                Business justification for this action. This field captures the
                "WHY"

                behind every change and is REQUIRED for all events.
              examples:
                - Patient showed allergic reaction to previous medication
                - Dosage adjustment per physician consultation on 2024-01-15
                - 'Regular intake from emergency department referral #12345'
            user_email:
              type: string
              format: email
              description: Email of the user who initiated this event
            user_name:
              type: string
              description: Name of the user who initiated this event
            correlation_id:
              type: string
              format: uuid
              description: ID to correlate related events across the system
            causation_id:
              type: string
              format: uuid
              description: ID of the event that caused this event
            ip_address:
              type: string
              format: ipv4
              description: IP address of the client
            user_agent:
              type: string
              description: User agent string of the client
            notes:
              type: string
              maxLength: 2000
              description: Additional context or notes
        created_at:
          type: string
          format: date-time
          description: When the event was created
        processed_at:
          type: string
          format: date-time
          description: When the event was successfully processed
          nullable: true
        processing_error:
          type: string
          description: Error message if processing failed
          nullable: true
