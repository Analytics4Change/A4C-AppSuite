# ========================================
# Environment Configuration Template
# Copy this file to .env.local and fill in your values
# All configuration is encrypted with git-crypt for security
# ========================================

# ========================================
# Deployment Mode Configuration
# ========================================

# Application Mode - Controls all service implementations
# Options: "mock" | "integration-auth" | "production"
#
# mock mode (default for development):
#   - Mock authentication (instant login, no network)
#   - Mock organization service (fake data)
#   - Mock workflows (localStorage only)
#   - Mock invitations (no real user creation)
#   - Works offline
#   - Fast iteration
#   Use: npm run dev (or npm run dev:mock)
#
# integration-auth mode (workflow testing):
#   - Mock authentication (instant login)
#   - Mock organization service
#   - Real workflows (Edge Functions, Temporal)
#   - Real invitations (Supabase user creation)
#   - Useful for testing workflows without auth complexity
#   Use: Set VITE_APP_MODE=integration-auth in .env.local
#
# production mode (integration/production):
#   - Real Supabase Auth (OAuth flows, real JWT)
#   - Real organization service (Edge Functions, Temporal workflows)
#   - Real workflows (Edge Functions, Temporal)
#   - Real invitations (Supabase user creation)
#   - Real database operations with RLS
#   Use: npm run dev:integration (or npm run dev:auth) or production builds
#
VITE_APP_MODE=mock

# Supabase Configuration (required for production mode)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# Backend API Configuration (required for workflow operations in production/integration modes)
# The Backend API runs inside the k8s cluster and proxies requests to Temporal
# This is required for organization bootstrap and other workflow operations
# Not required in mock mode (workflows are mocked locally)
VITE_BACKEND_API_URL=https://api-a4c.firstovertheline.com

# Mock Authentication Configuration (only used in mock mode)
# Optional: Override default dev user settings
# VITE_DEV_USER_NAME=Dev User (Provider Admin)
# VITE_DEV_USER_ROLE=provider_admin

# ========================================
# Medication Search API Configuration
# ========================================
# Set to 'true' to use real RXNorm API, 'false' for mock data
VITE_USE_RXNORM_API=false

# RXNorm API Configuration (optional overrides)
# VITE_RXNORM_BASE_URL=https://rxnav.nlm.nih.gov
# VITE_RXNORM_TIMEOUT=30000

# Cache Configuration (optional)
# VITE_CACHE_MEMORY_TTL=1800000
# VITE_CACHE_INDEXEDDB_TTL=86400000
# VITE_CACHE_MAX_MEMORY_ENTRIES=100

# Circuit Breaker Configuration (optional)
# VITE_CIRCUIT_FAILURE_THRESHOLD=5
# VITE_CIRCUIT_RESET_TIMEOUT=60000

# Search Configuration (optional)
# VITE_SEARCH_MIN_LENGTH=2
# VITE_SEARCH_MAX_RESULTS=50
# VITE_SEARCH_DEBOUNCE_MS=300


# ========================================
# Debug Configuration (Development Only)
# ========================================
# VITE_DEBUG_AUTH=false
# VITE_DEBUG_MOBX=false
# VITE_DEBUG_PERFORMANCE=false

# ========================================
# Platform Domain Configuration
# ========================================
# Single source of truth for all domain-related configuration.
# See: documentation/infrastructure/operations/configuration/ENVIRONMENT_VARIABLES.md
#
# Used for:
# - Cross-subdomain cookie scoping (session sharing)
# - Redirect URL validation (security)
# - Post-login subdomain redirect construction
#
# Examples:
#   VITE_PLATFORM_BASE_DOMAIN=firstovertheline.com  (production)
#   VITE_PLATFORM_BASE_DOMAIN=staging.example.com   (staging)
#
VITE_PLATFORM_BASE_DOMAIN=firstovertheline.com

# ========================================
# Authentication Architecture Documentation
# ========================================
# For detailed information about the authentication system:
# - Architecture: .plans/supabase-auth-integration/frontend-auth-architecture.md
# - Development Guide: frontend/docs/auth-provider-architecture.md
# - Usage Modes:
#   1. Mock Mode (fast local dev): npm run dev:mock
#   2. Integration Testing: npm run dev:auth
#   3. Production: npm run build
