# ========================================
# Environment Configuration Template
# Copy this file to .env.local and fill in your values
# All configuration is encrypted with git-crypt for security
# ========================================

# ========================================
# Smart Detection (Automatic Mode Selection)
# ========================================
#
# The application automatically detects the appropriate mode based on:
#
# 1. Supabase credentials present → use real Supabase Auth and services
# 2. Supabase credentials missing → use mock auth and services
# 3. Running on localhost → subdomain routing disabled (works with real auth!)
# 4. Production build + real hostname → full subdomain routing enabled
#
# This means:
# - npm run dev with credentials → Real auth, stays on localhost
# - npm run dev without credentials → Mock auth
# - npm run dev:mock → Force mock auth even with credentials
#
# No VITE_APP_MODE needed! Just set your credentials.
# ========================================

# ========================================
# Supabase Configuration
# ========================================
# If present, real Supabase Auth is used
# If missing, mock auth is used (for offline/fast development)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# ========================================
# Backend API Configuration
# ========================================
# Required for workflow operations (organization bootstrap, etc.)
# The Backend API runs inside the k8s cluster and proxies requests to Temporal
# Not required in mock mode (workflows are mocked locally)
VITE_BACKEND_API_URL=https://api-a4c.firstovertheline.com

# ========================================
# Force Mock Mode (Escape Hatch)
# ========================================
# Set to 'true' to force mock mode even when Supabase credentials are present
# Useful when you want to work offline or test mock behavior
# VITE_FORCE_MOCK=true

# ========================================
# Platform Domain Configuration (Optional)
# ========================================
# Auto-derived from current hostname in production.
# Only set this to override auto-detection.
#
# On localhost: Not needed (subdomain routing is disabled)
# In production: Derived from hostname (e.g., a4c.example.com → example.com)
#
# Override examples:
#   VITE_PLATFORM_BASE_DOMAIN=firstovertheline.com  (production)
#   VITE_PLATFORM_BASE_DOMAIN=staging.example.com   (staging)
#
# VITE_PLATFORM_BASE_DOMAIN=firstovertheline.com

# ========================================
# Mock Authentication Configuration
# ========================================
# Only used when mock auth is active (no Supabase credentials or VITE_FORCE_MOCK=true)
# VITE_DEV_USER_NAME=Dev User
# VITE_DEV_USER_ROLE=provider_admin
# VITE_DEV_USER_EMAIL=dev@example.com

# ========================================
# Medication Search API Configuration
# ========================================
# Set to 'true' to use real RXNorm API, 'false' for mock data
VITE_USE_RXNORM_API=false

# RXNorm API Configuration (optional overrides)
# VITE_RXNORM_BASE_URL=https://rxnav.nlm.nih.gov
# VITE_RXNORM_TIMEOUT=30000

# ========================================
# Cache Configuration (Optional)
# ========================================
# VITE_CACHE_MEMORY_TTL=1800000
# VITE_CACHE_INDEXEDDB_TTL=86400000
# VITE_CACHE_MAX_MEMORY_ENTRIES=100

# ========================================
# Circuit Breaker Configuration (Optional)
# ========================================
# VITE_CIRCUIT_FAILURE_THRESHOLD=5
# VITE_CIRCUIT_RESET_TIMEOUT=60000

# ========================================
# Search Configuration (Optional)
# ========================================
# VITE_SEARCH_MIN_LENGTH=2
# VITE_SEARCH_MAX_RESULTS=50
# VITE_SEARCH_DEBOUNCE_MS=300

# ========================================
# Debug Configuration (Development Only)
# ========================================
# VITE_DEBUG_AUTH=false
# VITE_DEBUG_MOBX=false
# VITE_DEBUG_PERFORMANCE=false

# ========================================
# Usage Summary
# ========================================
#
# npm run dev        → Auto-detects: real auth if credentials present, mock if not
#                      Subdomain routing DISABLED on localhost
#
# npm run dev:mock   → Forces mock auth even with credentials present
#                      Fast local development, works offline
#
# npm run build      → Production build, full features enabled
#                      Subdomain routing enabled in production
#
# For detailed documentation:
# - Architecture: documentation/architecture/authentication/frontend-auth-architecture.md
# - Environment Variables: documentation/infrastructure/operations/configuration/ENVIRONMENT_VARIABLES.md
